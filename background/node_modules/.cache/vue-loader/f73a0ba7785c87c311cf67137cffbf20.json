{"remainingRequest":"C:\\Users\\Molin\\Companion\\background\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Molin\\Companion\\background\\src\\App.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\Users\\Molin\\Companion\\background\\src\\App.vue","mtime":1610332794259},{"path":"C:\\Users\\Molin\\Companion\\background\\node_modules\\babel-loader\\lib\\index.js","mtime":1610329795007},{"path":"C:\\Users\\Molin\\Companion\\background\\node_modules\\ts-loader\\index.js","mtime":1610329799503},{"path":"C:\\Users\\Molin\\Companion\\background\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610245778946},{"path":"C:\\Users\\Molin\\Companion\\background\\node_modules\\vue-loader\\lib\\index.js","mtime":1610329801347}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCB7IHdpbmRvd05hbWVzLCBsZWFndWVDbGFzc0lkIH0gZnJvbSAiLi4vLi4vc2hhcmVkL2NvbnN0YW50cy9jb25zdHMiOwppbXBvcnQgeyBPV0dhbWVzIH0gZnJvbSAnLi4vLi4vc2hhcmVkL2xpYnMvb3ctZ2FtZXMnOwppbXBvcnQgeyBPV0dhbWVMaXN0ZW5lciB9IGZyb20gJy4uLy4uL3NoYXJlZC9saWJzL293LWdhbWUtbGlzdGVuZXInOwppbXBvcnQgeyBPV1dpbmRvdyB9IGZyb20gJy4uLy4uL3NoYXJlZC9saWJzL293LXdpbmRvdyc7Ci8vIEB0cy1pZ25vcmUKaW1wb3J0IFJ1bm5pbmdHYW1lSW5mbyA9IG92ZXJ3b2xmLmdhbWVzLlJ1bm5pbmdHYW1lSW5mbzsKLy8gVGhlIGJhY2tncm91bmQgY29udHJvbGxlciBob2xkcyBhbGwgb2YgdGhlIGFwcCdzIGJhY2tncm91bmQgbG9naWMgLSBoZW5jZSBpdHMgbmFtZS4gaXQgaGFzCi8vIG1hbnkgcG9zc2libGUgdXNlIGNhc2VzLCBmb3IgZXhhbXBsZSBzaGFyaW5nIGRhdGEgYmV0d2VlbiB3aW5kb3dzLCBvciwgaW4gb3VyIGNhc2UsCi8vIG1hbmFnaW5nIHdoaWNoIHdpbmRvdyBpcyBjdXJyZW50bHkgcHJlc2VudGVkIHRvIHRoZSB1c2VyLiBUbyB0aGF0IGVuZCwgaXQgaG9sZHMgYSBkaWN0aW9uYXJ5Ci8vIG9mIHRoZSB3aW5kb3dzIGF2YWlsYWJsZSBpbiB0aGUgYXBwLgovLyBPdXIgYmFja2dyb3VuZCBjb250cm9sbGVyIGltcGxlbWVudHMgdGhlIFNpbmdsZXRvbiBkZXNpZ24gcGF0dGVybiwgc2luY2Ugb25seSBvbmUKLy8gaW5zdGFuY2Ugb2YgaXQgc2hvdWxkIGV4aXN0LgpAQ29tcG9uZW50CmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcCBleHRlbmRzIFZ1ZSB7CiAgICBwcml2YXRlIF93aW5kb3dzID0ge307CiAgICBwcml2YXRlIF9nYW1lTGlzdGVuZXI6IE9XR2FtZUxpc3RlbmVyOwoKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5fd2luZG93cyA9IHt9OwogICAgICAgIC8vIFBvcHVsYXRpbmcgdGhlIGJhY2tncm91bmQgY29udHJvbGxlcidzIHdpbmRvdyBkaWN0aW9uYXJ5CiAgICAgICAgdGhpcy5fd2luZG93c1t3aW5kb3dOYW1lcy5kZXNrdG9wXSA9IG5ldyBPV1dpbmRvdyh3aW5kb3dOYW1lcy5kZXNrdG9wKTsKICAgICAgICB0aGlzLl93aW5kb3dzW3dpbmRvd05hbWVzLmluR2FtZV0gPSBuZXcgT1dXaW5kb3cod2luZG93TmFtZXMuaW5HYW1lKTsKCiAgICB9OwoKICAgIC8vIFdoZW4gcnVubmluZyB0aGUgYXBwLCBzdGFydCBsaXN0ZW5pbmcgdG8gZ2FtZXMnIHN0YXR1cyBhbmQgZGVjaWRlIHdoaWNoIHdpbmRvdyBzaG91bGQKICAgIC8vIGJlIGxhdW5jaGVkIGZpcnN0LCBiYXNlZCBvbiB3aGV0aGVyIEZvcnRuaXRlIGlzIGN1cnJlbnRseSBydW5uaW5nCiAgIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICAgICAvLyBXaGVuIGEgRm9ydG5pdGUgZ2FtZSBpcyBzdGFydGVkIG9yIGlzIGVuZGVkLCB0b2dnbGUgdGhlIGFwcCdzIHdpbmRvd3MKICAgICAgIHRoaXMuX2dhbWVMaXN0ZW5lciA9IG5ldyBPV0dhbWVMaXN0ZW5lcih7CiAgICAgICAgICAgb25HYW1lU3RhcnRlZDogdGhpcy50b2dnbGVXaW5kb3dzLmJpbmQodGhpcyksCiAgICAgICAgICAgb25HYW1lRW5kZWQ6IHRoaXMudG9nZ2xlV2luZG93cy5iaW5kKHRoaXMpCiAgICAgICB9KTsKICAgICAgICB0aGlzLl9nYW1lTGlzdGVuZXIuc3RhcnQoKTsKICAgICAgICBjb25zdCBjdXJyV2luZG93ID0gYXdhaXQgdGhpcy5pc0xlYWd1ZVJ1bm5pbmcoKSA/IHdpbmRvd05hbWVzLmluR2FtZSA6IHdpbmRvd05hbWVzLmRlc2t0b3A7CiAgICAgICAgdGhpcy5fd2luZG93c1tjdXJyV2luZG93XS5yZXN0b3JlKCk7CiAgICB9CgogICAgcHJpdmF0ZSB0b2dnbGVXaW5kb3dzKGluZm8pIHsKICAgICAgICBpZiAoIWluZm8gfHwgIXRoaXMuaXNHYW1lTGVhZ3VlKGluZm8pKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChpbmZvLmlzUnVubmluZykgewogICAgICAgICAgICB0aGlzLl93aW5kb3dzW3dpbmRvd05hbWVzLmRlc2t0b3BdLmNsb3NlKCk7CiAgICAgICAgICAgIHRoaXMuX3dpbmRvd3Nbd2luZG93TmFtZXMuaW5HYW1lXS5yZXN0b3JlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5fd2luZG93c1t3aW5kb3dOYW1lcy5pbkdhbWVdLmNsb3NlKCk7CiAgICAgICAgICAgIHRoaXMuX3dpbmRvd3Nbd2luZG93TmFtZXMuZGVza3RvcF0ucmVzdG9yZSgpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIGFzeW5jIGlzTGVhZ3VlUnVubmluZygpOiBQcm9taXNlPGJvb2xlYW4+IHsKICAgICAgICBjb25zdCBpbmZvID0gYXdhaXQgT1dHYW1lcy5nZXRSdW5uaW5nR2FtZUluZm8oKTsKCiAgICAgICAgcmV0dXJuIGluZm8gJiYgaW5mby5pc1J1bm5pbmcgJiYgdGhpcy5pc0dhbWVMZWFndWUoaW5mbyk7CiAgICB9CgogICAgLy8gSWRlbnRpZnkgd2hldGhlciB0aGUgUnVubmluZ0dhbWVJbmZvIG9iamVjdCB3ZSBoYXZlIHJlZmVyZW5jZXMgRm9ydG5pdGUKICAgIHByaXZhdGUgaXNHYW1lTGVhZ3VlKGluZm86IFJ1bm5pbmdHYW1lSW5mbykgewogICAgICAgIHJldHVybiBpbmZvLmNsYXNzSWQgPT09IGxlYWd1ZUNsYXNzSWQ7CiAgICB9Cn0K"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n    import { Component, Vue } from 'vue-property-decorator';\r\n    import { windowNames, leagueClassId } from \"../../shared/constants/consts\";\r\n    import { OWGames } from '../../shared/libs/ow-games';\r\n    import { OWGameListener } from '../../shared/libs/ow-game-listener';\r\n    import { OWWindow } from '../../shared/libs/ow-window';\r\n    // @ts-ignore\r\n    import RunningGameInfo = overwolf.games.RunningGameInfo;\r\n    // The background controller holds all of the app's background logic - hence its name. it has\r\n    // many possible use cases, for example sharing data between windows, or, in our case,\r\n    // managing which window is currently presented to the user. To that end, it holds a dictionary\r\n    // of the windows available in the app.\r\n    // Our background controller implements the Singleton design pattern, since only one\r\n    // instance of it should exist.\r\n    @Component\r\n    export default class App extends Vue {\r\n        private _windows = {};\r\n        private _gameListener: OWGameListener;\r\n\r\n        mounted() {\r\n            this._windows = {};\r\n            // Populating the background controller's window dictionary\r\n            this._windows[windowNames.desktop] = new OWWindow(windowNames.desktop);\r\n            this._windows[windowNames.inGame] = new OWWindow(windowNames.inGame);\r\n\r\n        };\r\n\r\n        // When running the app, start listening to games' status and decide which window should\r\n        // be launched first, based on whether Fortnite is currently running\r\n       async created() {\r\n           // When a Fortnite game is started or is ended, toggle the app's windows\r\n           this._gameListener = new OWGameListener({\r\n               onGameStarted: this.toggleWindows.bind(this),\r\n               onGameEnded: this.toggleWindows.bind(this)\r\n           });\r\n            this._gameListener.start();\r\n            const currWindow = await this.isLeagueRunning() ? windowNames.inGame : windowNames.desktop;\r\n            this._windows[currWindow].restore();\r\n        }\r\n\r\n        private toggleWindows(info) {\r\n            if (!info || !this.isGameLeague(info)) {\r\n                return;\r\n            }\r\n\r\n            if (info.isRunning) {\r\n                this._windows[windowNames.desktop].close();\r\n                this._windows[windowNames.inGame].restore();\r\n            } else {\r\n                this._windows[windowNames.inGame].close();\r\n                this._windows[windowNames.desktop].restore();\r\n            }\r\n        }\r\n\r\n        private async isLeagueRunning(): Promise<boolean> {\r\n            const info = await OWGames.getRunningGameInfo();\r\n\r\n            return info && info.isRunning && this.isGameLeague(info);\r\n        }\r\n\r\n        // Identify whether the RunningGameInfo object we have references Fortnite\r\n        private isGameLeague(info: RunningGameInfo) {\r\n            return info.classId === leagueClassId;\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}