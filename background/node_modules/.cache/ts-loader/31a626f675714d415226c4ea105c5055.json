{"remainingRequest":"C:\\Users\\Luca\\Companion\\CoreApp\\background\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Luca\\Companion\\CoreApp\\background\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Luca\\Companion\\CoreApp\\background\\node_modules\\ts-loader\\index.js??ref--13-3!C:\\Users\\Luca\\Companion\\CoreApp\\shared\\libs\\ow-game-listener.ts","dependencies":[{"path":"C:\\Users\\Luca\\Companion\\CoreApp\\shared\\libs\\ow-game-listener.ts","mtime":1608681494459},{"path":"C:\\Users\\Luca\\Companion\\CoreApp\\background\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1608685446369},{"path":"C:\\Users\\Luca\\Companion\\CoreApp\\background\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1608685447511},{"path":"C:\\Users\\Luca\\Companion\\CoreApp\\background\\node_modules\\babel-loader\\lib\\index.js","mtime":1608685524005},{"path":"C:\\Users\\Luca\\Companion\\CoreApp\\background\\node_modules\\ts-loader\\index.js","mtime":1608685447723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOlxcVXNlcnNcXEx1Y2FcXENvbXBhbmlvblxcQ29yZUFwcFxcYmFja2dyb3VuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6XFxVc2Vyc1xcTHVjYVxcQ29tcGFuaW9uXFxDb3JlQXBwXFxiYWNrZ3JvdW5kXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICJDOlxcVXNlcnNcXEx1Y2FcXENvbXBhbmlvblxcQ29yZUFwcFxcYmFja2dyb3VuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQzpcXFVzZXJzXFxMdWNhXFxDb21wYW5pb25cXENvcmVBcHBcXGJhY2tncm91bmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9nZXQgZnJvbSAiQzpcXFVzZXJzXFxMdWNhXFxDb21wYW5pb25cXENvcmVBcHBcXGJhY2tncm91bmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2dldCI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiQzpcXFVzZXJzXFxMdWNhXFxDb21wYW5pb25cXENvcmVBcHBcXGJhY2tncm91bmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKLy8gQHRzLW5vY2hlY2sKaW1wb3J0IHsgT1dMaXN0ZW5lciB9IGZyb20gIi4vb3ctbGlzdGVuZXIiOwpleHBvcnQgdmFyIE9XR2FtZUxpc3RlbmVyID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoX09XTGlzdGVuZXIpIHsKICBfaW5oZXJpdHMoT1dHYW1lTGlzdGVuZXIsIF9PV0xpc3RlbmVyKTsKCiAgZnVuY3Rpb24gT1dHYW1lTGlzdGVuZXIoZGVsZWdhdGUpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT1dHYW1lTGlzdGVuZXIpOwoKICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKE9XR2FtZUxpc3RlbmVyKS5jYWxsKHRoaXMsIGRlbGVnYXRlKSk7CgogICAgX3RoaXMub25HYW1lSW5mb1VwZGF0ZWQgPSBmdW5jdGlvbiAodXBkYXRlKSB7CiAgICAgIGlmICghdXBkYXRlIHx8ICF1cGRhdGUuZ2FtZUluZm8pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghdXBkYXRlLnJ1bm5pbmdDaGFuZ2VkICYmICF1cGRhdGUuZ2FtZUNoYW5nZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh1cGRhdGUuZ2FtZUluZm8uaXNSdW5uaW5nKSB7CiAgICAgICAgaWYgKF90aGlzLl9kZWxlZ2F0ZS5vbkdhbWVTdGFydGVkKSB7CiAgICAgICAgICBfdGhpcy5fZGVsZWdhdGUub25HYW1lU3RhcnRlZCh1cGRhdGUuZ2FtZUluZm8pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoX3RoaXMuX2RlbGVnYXRlLm9uR2FtZUVuZGVkKSB7CiAgICAgICAgICBfdGhpcy5fZGVsZWdhdGUub25HYW1lRW5kZWQodXBkYXRlLmdhbWVJbmZvKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgX3RoaXMub25SdW5uaW5nR2FtZUluZm8gPSBmdW5jdGlvbiAoaW5mbykgewogICAgICBpZiAoIWluZm8pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChpbmZvLmlzUnVubmluZykgewogICAgICAgIGlmIChfdGhpcy5fZGVsZWdhdGUub25HYW1lU3RhcnRlZCkgewogICAgICAgICAgX3RoaXMuX2RlbGVnYXRlLm9uR2FtZVN0YXJ0ZWQoaW5mbyk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhPV0dhbWVMaXN0ZW5lciwgW3sKICAgIGtleTogInN0YXJ0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydCgpIHsKICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoT1dHYW1lTGlzdGVuZXIucHJvdG90eXBlKSwgInN0YXJ0IiwgdGhpcykuY2FsbCh0aGlzKTsKCiAgICAgIG92ZXJ3b2xmLmdhbWVzLm9uR2FtZUluZm9VcGRhdGVkLmFkZExpc3RlbmVyKHRoaXMub25HYW1lSW5mb1VwZGF0ZWQpOwogICAgICBvdmVyd29sZi5nYW1lcy5nZXRSdW5uaW5nR2FtZUluZm8odGhpcy5vblJ1bm5pbmdHYW1lSW5mbyk7CiAgICB9CiAgfSwgewogICAga2V5OiAic3RvcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3RvcCgpIHsKICAgICAgb3ZlcndvbGYuZ2FtZXMub25HYW1lSW5mb1VwZGF0ZWQucmVtb3ZlTGlzdGVuZXIodGhpcy5vbkdhbWVJbmZvVXBkYXRlZCk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gT1dHYW1lTGlzdGVuZXI7Cn0oT1dMaXN0ZW5lcik7"},{"version":3,"sources":["C:\\Users\\Luca\\Companion\\CoreApp\\shared\\libs\\ow-game-listener.ts"],"names":[],"mappings":";;;;;;AAAA;AAEA,SAAS,UAAT,QAA+C,eAA/C;AAOA,WAAa,cAAb;AAAA;AAAA;AAAA;;AACE,0BAAY,QAAZ,EAA4C;AAAA;;AAAA;;AAC1C,wFAAM,QAAN;;AAcM,UAAA,iBAAA,GAAoB,UAAC,MAAD,EAAsD;AAChF,UAAI,CAAC,MAAD,IAAW,CAAC,MAAM,CAAC,QAAvB,EAAiC;AAC/B;AACD;;AAED,UAAI,CAAC,MAAM,CAAC,cAAR,IAA0B,CAAC,MAAM,CAAC,WAAtC,EAAmD;AACjD;AACD;;AAED,UAAI,MAAM,CAAC,QAAP,CAAgB,SAApB,EAA+B;AAC7B,YAAI,MAAK,SAAL,CAAe,aAAnB,EAAkC;AAChC,gBAAK,SAAL,CAAe,aAAf,CAA6B,MAAM,CAAC,QAApC;AACD;AACF,OAJD,MAIO;AACL,YAAI,MAAK,SAAL,CAAe,WAAnB,EAAgC;AAC9B,gBAAK,SAAL,CAAe,WAAf,CAA2B,MAAM,CAAC,QAAlC;AACD;AACF;AACF,KAlBO;;AAoBA,UAAA,iBAAA,GAAoB,UAAC,IAAD,EAA+C;AACzE,UAAI,CAAC,IAAL,EAAW;AACT;AACD;;AAED,UAAI,IAAI,CAAC,SAAT,EAAoB;AAClB,YAAI,MAAK,SAAL,CAAe,aAAnB,EAAkC;AAChC,gBAAK,SAAL,CAAe,aAAf,CAA6B,IAA7B;AACD;AACF;AACF,KAVO;;AAnCoC;AAE3C;;AAHH;AAAA;AAAA,4BAKc;AACV;;AAEA,MAAA,QAAQ,CAAC,KAAT,CAAe,iBAAf,CAAiC,WAAjC,CAA6C,KAAK,iBAAlD;AACA,MAAA,QAAQ,CAAC,KAAT,CAAe,kBAAf,CAAkC,KAAK,iBAAvC;AACD;AAVH;AAAA;AAAA,2BAYa;AACT,MAAA,QAAQ,CAAC,KAAT,CAAe,iBAAf,CAAiC,cAAjC,CAAgD,KAAK,iBAArD;AACD;AAdH;;AAAA;AAAA,EAAoC,UAApC","sourcesContent":["// @ts-nocheck\r\n\r\nimport { OWListener, OWListenerDelegate } from \"./ow-listener\";\r\n\r\nexport interface OWGameListenerDelegate extends OWListenerDelegate {\r\n  onGameStarted?(info: overwolf.games.RunningGameInfo);\r\n  onGameEnded?(info: overwolf.games.RunningGameInfo);\r\n}\r\n\r\nexport class OWGameListener extends OWListener<OWGameListenerDelegate> {\r\n  constructor(delegate: OWGameListenerDelegate) {\r\n    super(delegate);\r\n  }\r\n\r\n  public start(): void {\r\n    super.start();\r\n\r\n    overwolf.games.onGameInfoUpdated.addListener(this.onGameInfoUpdated);\r\n    overwolf.games.getRunningGameInfo(this.onRunningGameInfo);\r\n  }\r\n\r\n  public stop(): void {\r\n    overwolf.games.onGameInfoUpdated.removeListener(this.onGameInfoUpdated);\r\n  }\r\n\r\n  private onGameInfoUpdated = (update: overwolf.games.GameInfoUpdatedEvent): void => {\r\n    if (!update || !update.gameInfo) {\r\n      return;\r\n    }\r\n\r\n    if (!update.runningChanged && !update.gameChanged) {\r\n      return;\r\n    }\r\n\r\n    if (update.gameInfo.isRunning) {\r\n      if (this._delegate.onGameStarted) {\r\n        this._delegate.onGameStarted(update.gameInfo)\r\n      }\r\n    } else {\r\n      if (this._delegate.onGameEnded) {\r\n        this._delegate.onGameEnded(update.gameInfo)\r\n      }\r\n    }\r\n  }\r\n\r\n  private onRunningGameInfo = (info: overwolf.games.RunningGameInfo): void => {\r\n    if (!info) {\r\n      return;\r\n    }\r\n\r\n    if (info.isRunning) {\r\n      if (this._delegate.onGameStarted) {\r\n        this._delegate.onGameStarted(info)\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}]}