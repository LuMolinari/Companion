{"remainingRequest":"C:\\Users\\Molin\\Companion\\desktop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Molin\\Companion\\desktop\\src\\components\\Stats.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\Users\\Molin\\Companion\\desktop\\src\\components\\Stats.vue","mtime":1612574686574},{"path":"C:\\Users\\Molin\\Companion\\desktop\\node_modules\\babel-loader\\lib\\index.js","mtime":1610329795007},{"path":"C:\\Users\\Molin\\Companion\\desktop\\node_modules\\ts-loader\\index.js","mtime":1610329799503},{"path":"C:\\Users\\Molin\\Companion\\desktop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610245778946},{"path":"C:\\Users\\Molin\\Companion\\desktop\\node_modules\\vue-loader\\lib\\index.js","mtime":1610329801347}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQppbXBvcnQgeyBDb21wb25lbnQsIFZ1ZSB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOw0KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsNCi8vIEB0cy1pZ25vcmUNCmltcG9ydCBzcGVsbHMgZnJvbSAibG9sLXNwZWxscyI7DQovLyBAdHMtaWdub3JlDQppbXBvcnQgY2hhbXBpb25zIGZyb20gImxvbC1jaGFtcGlvbnMiOw0KDQpjbGFzcyBDaGFtcGlvbiB7DQogIGlkOiBudW1iZXI7DQogIG5hbWU6IHN0cmluZzsNCiAgdXJsOiBzdHJpbmc7DQoNCiAgY29uc3RydWN0b3IoaWQsIG5hbWUsIHVybCkgew0KICAgIHRoaXMuaWQgPSBpZDsNCiAgICB0aGlzLm5hbWUgPSBuYW1lOw0KICAgIHRoaXMudXJsID0gdXJsOw0KICB9DQp9DQoNCkBDb21wb25lbnQNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YXRzIGV4dGVuZHMgVnVlIHsNCiAgaW5mb0F2YWlsYWJsZSA9IHRydWU7DQogIHN1bW1vbmVyX2luZm8gPSBudWxsOw0KICBzdW1tb25lck5hbWUgPSAiRG91YmxlbGlmdCI7DQogIHByb2ZpbGVfaWNvbl9pZF91cmwgPQ0KICAgICJodHRwOi8vZGRyYWdvbi5sZWFndWVvZmxlZ2VuZHMuY29tL2Nkbi8xMS4yLjEvaW1nL3Byb2ZpbGVpY29uLzEyLnBuZyI7DQogIHN1bW1vbmVyTGV2ZWwgPSAiIjsNCg0KICAvLyB0aGVzZSBhcmUgbmVlZGVkIGZvciBBUEkgY2FsbHMgZm9yIHN0YXRzDQogIGVuY3lwdGVkX3N1bW1vbmVyX2lkID0gIiI7DQogIGVuY3lwdGVkX2FjY291bnRfaWQgPSAiIjsNCg0KICByZWNlbnRDaGFtcGlvbnM6IENoYW1waW9uW10gPSBuZXcgQXJyYXkoKTsNCg0KICBsYXN0TWF0Y2ggPSB7DQogICAgLy9BUkFNICYgTm9ybWFscw0KICAgIGdhbWVNb2RlOiAiQVJBTSIsDQogICAgLy9nYW1lIHN0YXJ0ZWQgJiBkdXJhdGlvbg0KICAgIGdhbWVDcmVhdGlvbjogbmV3IERhdGUoMTYxMTc5MDg2NDIwNCkudG9Mb2NhbGVEYXRlU3RyaW5nKCksDQogICAgZ2FtZUR1cmF0aW9uOiBuZXcgRGF0ZSg4MjA1NDM1NDMpLnRvVGltZVN0cmluZygpLA0KICAgIC8vd2luIG9yIGxvc2UNCiAgICB3aW46ICJXaW4iLA0KICAgIC8vQ2hhbXBpb24gVXNlZA0KICAgIGNoYW1waW9uSWQ6IDAsDQogICAgY2hhbXBpb25OYW1lOiAiIiwNCiAgICBjaGFtcEFydFVSTDogIiIsDQogICAgLy9TdGFydGVyIHNwZWxscyBsaWtlIEZsYXNoIG9yIEhlYWwNCiAgICAvL3RoZXNlIGFyZSBpbWcgdXJscywgYnV0IGkgY2FuIGxvb2sgZm9yIHRoZSBuYW1lcyBpZiB3ZSBuZWVkIHRoZW0NCiAgICBzcGVsbDFJZDogIiIsDQogICAgc3BlbGwxSWNvbjogIiIsDQogICAgc3BlbGwySWQ6ICIiLA0KICAgIHNwZWxsMkljb246ICIiLA0KDQogICAgLy9JdGVtcyB1c2VkIGluIG1hdGNoDQogICAgaXRlbTA6ICIiLA0KICAgIGl0ZW0xOiAiIiwNCiAgICBpdGVtMjogIiIsDQogICAgaXRlbTM6ICIiLA0KICAgIGl0ZW00OiAiIiwNCiAgICBpdGVtNTogIiIsDQogICAgaXRlbTY6ICIiLA0KICAgIC8vS0RBDQogICAga2lsbHM6IDAsDQogICAgZGVhdGhzOiAwLA0KICAgIGFzc2lzdHM6IDAsDQogICAga2RhOiAiLTEuMSIsDQogICAgLy8gbXVsdGlraWxscw0KICAgIGxhcmdlc3RNdWx0aUtpbGw6ICIiLA0KICAgIGNoYW1wTGV2ZWw6IDE1LA0KICAgIC8vbWluaW9uIGtpbGxzICYgY3MNCiAgICB0b3RhbE1pbmlvbnNLaWxsZWQ6IDMxLA0KICAgIC8vb3B0aW9uYWxseSB3ZSBjYW4gYWRkIEtpbGwgcGFydGljaXBhdGlvbi4gY2FsY3VsYXRlZCBieSBraWxscyBwbHVzIGFzc2lzdHMgYW5kIGRpdmlkaW5nIHRoYXQgYnkgdGhlaXIgdGVhbSdzIHRvdGFsIGtpbGxzLg0KICAgIC8vd2UgY2FuIGFsc28gYWRkIGFsbCB0aGUgcGxhbHllcnMgaW4gdGhlIGdhbWUNCiAgICAvL3RoaXMgaXMgd2hhdCBpIG1vZGVsZWQgdGhlIGRhdGEgb2ZmIG9mIGh0dHBzOi8vbmEub3AuZ2cvc3VtbW9uZXIvdXNlck5hbWU9ZG91YmxlbGlmdA0KICB9Ow0KDQogIC8vdGhpcyBvYmplY3Qgd2lsbCBiZSB1c2VkIGZvciBzdGF0cyB0byBkaXNwbGF5DQogIHN0YXRzID0gew0KICAgIHdpbnM6IDAsDQogICAgYXZnX0tpbGxzOiAiIiwNCiAgICBkaWZmX0NoYW1waW9uczogMCwNCiAgICBsb3NzZXM6IDAsDQogICAgYXZnX2Fzc2lzdHM6ICIiLA0KICAgIGRpZmZfUm9sZXM6IDAsDQogICAgd2luX1JhdGU6ICIiLA0KICAgIGF2Z19EZWF0aDogIiIsDQogICAgZGlmZl9RdWV1ZXM6IDAsDQogIH07DQoNCiAgZ2V0IHN1bW1vbmVyRGF0YUF2YWlsYWJsZSgpIHsNCiAgICByZXR1cm4gdGhpcy5pbmZvQXZhaWxhYmxlOw0KICB9DQoNCiAgLy90aGlzIGlzIGZvciB0aGUgdi1mb3IgZm9yIGNoYW1wIGltYWdlcw0KICBnZXRDaGFtcFVSTCggY2hhbXA6Q2hhbXBpb24pew0KICAgIGNvbnNvbGUubG9nKCJjaGFtcCIsIGNoYW1wKQ0KICAgIHJldHVybiBjaGFtcC51cmw7DQogIH0NCg0KICAvL1RoaXMgcGFnZSB3aWxsIHVzZSB0aGUgc2FtZSBsYXVuY2hlciBpbmZvIGFzIGJlZm9yZQ0KICAvL1RPRE86ICM5IFNlbmQgVXNlciBpbmZvIGJldHdlZW4gZGVza3RvcCBjb21wb25lbnRzIGZyb20gaG9tZSBtZW51IHJhdGhlciB0aGFuIHVzZSBvdmVyd29sZiBsYXVuY2hlciBBUEkuIHdpbGwgc3BlZWQgdGhpbmdzIHVwDQogIC8vY29ubmVjdCB0byBvdmVyd29sZiBBUEkgdG8gZ2FpbiB1c2VyIGRhdGENCiAgbW91bnRlZCgpIHsNCiAgICBsZXQgc2VsZiA9IHRoaXM7DQoNCiAgICAvL3JlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycw0KICAgIGZ1bmN0aW9uIHJlZ2lzdGVyRXZlbnRzKCkgew0KICAgICAgLy8gZ2VuZXJhbCBldmVudHMgZXJyb3JzDQogICAgICAvLyBAdHMtaWdub3JlDQogICAgICBvdmVyd29sZi5nYW1lcy5ldmVudHMub25FcnJvci5hZGRMaXN0ZW5lcihmdW5jdGlvbiAoaW5mbykgew0KICAgICAgICBjb25zb2xlLmxvZygiRXJyb3I6ICIgKyBKU09OLnN0cmluZ2lmeShpbmZvKSk7DQogICAgICB9KTsNCg0KICAgICAgLy8gInN0YXRpYyIgZGF0YSBjaGFuZ2VkDQogICAgICAvLyBUaGlzIHdpbGwgYWxzbyBiZSB0cmlnZ2VyZWQgdGhlIGZpcnN0IHRpbWUgd2UgcmVnaXN0ZXINCiAgICAgIC8vIGZvciBldmVudHMgYW5kIHdpbGwgY29udGFpbiBhbGwgdGhlIGN1cnJlbnQgaW5mb3JtYXRpb24NCiAgICAgIC8vIEB0cy1pZ25vcmUNCiAgICAgIG92ZXJ3b2xmLmdhbWVzLmxhdW5jaGVycy5ldmVudHMub25JbmZvVXBkYXRlcy5hZGRMaXN0ZW5lcihmdW5jdGlvbiAoDQogICAgICAgIGluZm8NCiAgICAgICkgew0KICAgICAgICBjb25zb2xlLmxvZygiSW5mbyBVUERBVEU6ICIgKyBKU09OLnN0cmluZ2lmeShpbmZvKSk7DQogICAgICB9KTsNCg0KICAgICAgLy8gYW4gZXZlbnQgdHJpZ2dlcmVkDQogICAgICAvLyBAdHMtaWdub3JlDQogICAgICBvdmVyd29sZi5nYW1lcy5sYXVuY2hlcnMuZXZlbnRzLm9uTmV3RXZlbnRzLmFkZExpc3RlbmVyKGZ1bmN0aW9uIChpbmZvKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCJFVkVOVCBGSVJFRDogIiArIEpTT04uc3RyaW5naWZ5KGluZm8pKTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNldEZlYXR1cmVzKCkgew0KICAgICAgLy8gQHRzLWlnbm9yZQ0KICAgICAgb3ZlcndvbGYuZ2FtZXMubGF1bmNoZXJzLmV2ZW50cy5zZXRSZXF1aXJlZEZlYXR1cmVzKA0KICAgICAgICAxMDkwMiwNCiAgICAgICAgWw0KICAgICAgICAgICJnYW1lX2Zsb3ciLA0KICAgICAgICAgICJzdW1tb25lcl9pbmZvIiwNCiAgICAgICAgICAiY2hhbXBfc2VsZWN0IiwNCiAgICAgICAgICAibGN1X2luZm8iLA0KICAgICAgICAgICJsb2JieV9pbmZvIiwNCiAgICAgICAgICAiZW5kX2dhbWUiLA0KICAgICAgICAgICJnYW1lX2luZm8iLA0KICAgICAgICBdLA0KICAgICAgICBmdW5jdGlvbiAoaW5mbykgew0KICAgICAgICAgIGlmIChpbmZvLnN0YXR1cyA9PSAiZXJyb3IiKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygiQ291bGQgbm90IHNldCByZXF1aXJlZCBmZWF0dXJlczogIiArIGluZm8ucmVhc29uKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJUcnlpbmcgaW4gMiBzZWNvbmRzIik7DQogICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChzZXRGZWF0dXJlcywgMjAwMCk7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KDQogICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoaW5mbykpOw0KDQogICAgICAgICAgLy8gQHRzLWlnbm9yZQ0KICAgICAgICAgIG92ZXJ3b2xmLmdhbWVzLmxhdW5jaGVycy5ldmVudHMuZ2V0SW5mbygxMDkwMiwgZnVuY3Rpb24gKGluZm8pIHsNCiAgICAgICAgICAgIGlmIChpbmZvLnN0YXR1cyA9PT0gInN1Y2Nlc3MiKSB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTdW1tb25lciBJbmZvIiwgaW5mby5yZXMuc3VtbW9uZXJfaW5mby5kaXNwbGF5X25hbWUpOw0KDQogICAgICAgICAgICAgIC8vZmlsbGluZyBpbiBkYXRhIGZyb20gd2hhdCB0aGUgbGF1bmNoZXIgcmVjaWV2ZXMNCiAgICAgICAgICAgICAgc2VsZi5zdW1tb25lcl9pbmZvID0gaW5mby5yZXMuc3VtbW9uZXJfaW5mbzsNCiAgICAgICAgICAgICAgLy9GT1IgVEVTVElORyBQVVJQT1NFUw0KICAgICAgICAgICAgICAvL3NlbGYuc3VtbW9uZXJOYW1lID0gc2VsZi5zdW1tb25lcl9pbmZvLmRpc3BsYXlfbmFtZTsNCiAgICAgICAgICAgICAgLy8gICBzZWxmLnByb2ZpbGVfaWNvbl9pZF91cmwgPQ0KICAgICAgICAgICAgICAvLyAgICAgImh0dHA6Ly9kZHJhZ29uLmxlYWd1ZW9mbGVnZW5kcy5jb20vY2RuLzExLjIuMS9pbWcvcHJvZmlsZWljb24vIiArDQogICAgICAgICAgICAgIC8vICAgICBzZWxmLnN1bW1vbmVyX2luZm8ucHJvZmlsZV9pY29uX2lkICsNCiAgICAgICAgICAgICAgLy8gICAgICIucG5nIjsNCiAgICAgICAgICAgICAgc2VsZi5zdW1tb25lckxldmVsID0gc2VsZi5zdW1tb25lcl9pbmZvLnN1bW1vbmVyX2xldmVsOw0KICAgICAgICAgICAgICAvL3JhbmRvbWx5IGNob3Npbmcgc3BsYXNoIGFydCBmcm9tIGFycmF5DQoNCiAgICAgICAgICAgICAgc2VsZi5pbmZvQXZhaWxhYmxlID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBsYXVuY2hlclJ1bm5pbmcobGF1bmNoZXJJbmZvKSB7DQogICAgICBpZiAoIWxhdW5jaGVySW5mbykgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQoNCiAgICAgIGlmICghbGF1bmNoZXJJbmZvLmxhdW5jaGVyc1swXSkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQoNCiAgICAgIC8vIE5PVEU6IHdlIGRpdmlkZSBieSAxMCB0byBnZXQgdGhlIGxhdW5jaGVyIGNsYXNzIGlkIHdpdGhvdXQgaXQncyBzZXF1ZW5jZSBudW1iZXINCiAgICAgIGlmIChNYXRoLmZsb29yKGxhdW5jaGVySW5mby5sYXVuY2hlcnNbMF0uaWQgLyAxMCkgIT0gMTA5MDIpIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KDQogICAgICBjb25zb2xlLmxvZygiTGVhZ3VlIG9mIExlZ2VuZHMgbGF1bmNoZXIgcnVubmluZyIpOw0KICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLy9jcmVhdGUgc3RhcnRpbmcgbGlzdGVuZXJzDQogICAgLy8gQHRzLWlnbm9yZQ0KICAgIG92ZXJ3b2xmLmdhbWVzLmxhdW5jaGVycy5vbkxhdW5jaGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uICgpIHsNCiAgICAgIHJlZ2lzdGVyRXZlbnRzKCk7DQogICAgICBzZXRUaW1lb3V0KHNldEZlYXR1cmVzLCAxMDAwKTsNCiAgICAgIGNvbnNvbGUubG9nKCJvbkxhdW5jaGVkIGZpcmVkIik7DQogICAgfSk7DQogICAgLy8gQHRzLWlnbm9yZQ0KICAgIG92ZXJ3b2xmLmdhbWVzLmxhdW5jaGVycy5nZXRSdW5uaW5nTGF1bmNoZXJzSW5mbyhmdW5jdGlvbiAocmVzKSB7DQogICAgICBpZiAobGF1bmNoZXJSdW5uaW5nKHJlcykpIHsNCiAgICAgICAgcmVnaXN0ZXJFdmVudHMoKTsNCiAgICAgICAgc2V0VGltZW91dChzZXRGZWF0dXJlcywgMTAwMCk7DQogICAgICB9DQogICAgICBjb25zb2xlLmxvZygiZ2V0UnVubmluZ0xhdW5jaGVyc0luZm86ICIgKyBKU09OLnN0cmluZ2lmeShyZXMpKTsNCiAgICB9KTsNCg0KICAgIC8vIEB0cy1pZ25vcmUNCiAgICBvdmVyd29sZi5nYW1lcy5sYXVuY2hlcnMub25UZXJtaW5hdGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uIChyZXMpIHsNCiAgICAgIHNldFRpbWVvdXQod2luZG93LmNsb3NlLCAxMDAwKTsNCiAgICB9KTsNCiAgfQ0KDQogIGFzeW5jIGNyZWF0ZWQoKSB7DQogICAgLy9jcmVhdGUgdmFyaWFibGUgZm9yIHRoaXMNCiAgICBsZXQgc2VsZiA9IHRoaXM7DQogICAgLy9jcmVhdGUgdXJsIHRvIGNhbGwgZm9yIHN1bW1vbmVyIGRhdGENCiAgICBsZXQgc3VtbW9uZXJJbmZvVVJMID0NCiAgICAgICJodHRwczovL25hMS5hcGkucmlvdGdhbWVzLmNvbS9sb2wvc3VtbW9uZXIvdjQvc3VtbW9uZXJzL2J5LW5hbWUvIiArDQogICAgICBzZWxmLnN1bW1vbmVyTmFtZSArDQogICAgICAiP2FwaV9rZXk9UkdBUEktYzI2N2UzZTgtODdjZC00NGZlLTg5YWItYWZhOGY4ZmQxZGM5IjsNCiAgICAvL0FDQ09VTlRJRCA+PiBNQVRDSExJU1QgPj4gTEFTVCBNQVRDSCBEQVRBDQogICAgY29uc29sZS5sb2coIlN1bW1vbmVyTmFtZSBiZWluZyBxdWVyaWVkOiAiLCBzZWxmLnN1bW1vbmVyTmFtZSk7DQoNCiAgICAvL1VzZSBheGlvcyB0byBjYWxsIEFQSSBhbmQgZ2V0IHN1bW1vbmVyIGluZm8NCiAgICAvL0FDQ09VTlQgSUQNCiAgICBhd2FpdCBheGlvcw0KICAgICAgLmdldChzdW1tb25lckluZm9VUkwpDQogICAgICAudGhlbihhc3luYyAoc3VtbW9uZXJJbmZvKSA9PiB7DQogICAgICAgIC8vU2F2ZSBlbmNyeXB0ZWQgc3VtbW9uZXIgZGF0YQ0KICAgICAgICBjb25zb2xlLmxvZygiU3VtbW9uZXIgQVBJIENBTEwgUkVTUE9OQ0U6ICIsIHN1bW1vbmVySW5mbyk7DQoNCiAgICAgICAgc2VsZi5lbmN5cHRlZF9zdW1tb25lcl9pZCA9IHN1bW1vbmVySW5mby5kYXRhLmlkOw0KICAgICAgICBzZWxmLmVuY3lwdGVkX2FjY291bnRfaWQgPSBzdW1tb25lckluZm8uZGF0YS5hY2NvdW50SWQ7DQogICAgICAgIC8vTUFUQ0hMSVNUDQogICAgICAgIC8vdXNlIGF4aW9zIHRvIGdldCBhIG1hdGNobGlzdCBmcm9tIFJJT1QgQVBJDQogICAgICAgIGNvbnNvbGUubG9nKA0KICAgICAgICAgICJNYXRjaGxpc3QgcXVlcmllZCB1c2luZyBlbmNyeXB0ZWQgc3VtbW9uZXIgSWQ6ICIsDQogICAgICAgICAgc2VsZi5lbmN5cHRlZF9hY2NvdW50X2lkDQogICAgICAgICk7DQogICAgICAgIGxldCBtYXRjaEluZm9VUkwgPQ0KICAgICAgICAgICJodHRwczovL25hMS5hcGkucmlvdGdhbWVzLmNvbS9sb2wvbWF0Y2gvdjQvbWF0Y2hsaXN0cy9ieS1hY2NvdW50LyIgKw0KICAgICAgICAgIHNlbGYuZW5jeXB0ZWRfYWNjb3VudF9pZCArDQogICAgICAgICAgIj9hcGlfa2V5PVJHQVBJLWMyNjdlM2U4LTg3Y2QtNDRmZS04OWFiLWFmYThmOGZkMWRjOSI7DQoNCiAgICAgICAgLy9OZXN0ZWQgQXhpb3MgQ2FsbCB0byByZWNpZXZlIGRhdGEgZnJvbSBtb3N0IHJlY2VudCBtYXRjaCBhbmQgZW50ZXIgaXQgaW4gbGFzdCBtYXRjaA0KICAgICAgICBhd2FpdCBheGlvcw0KICAgICAgICAgIC5nZXQobWF0Y2hJbmZvVVJMKQ0KICAgICAgICAgIC50aGVuKGFzeW5jIChtYXRjaExpc3QpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJNYXRjaExpc3QgQVBJIENBTEwgUkVTUE9OQ0U6ICIsIG1hdGNoTGlzdCk7DQoNCiAgICAgICAgICAgIC8vdHNpZ25vcmUgcmVtb3ZlcyB0aGUgZXJyb3IgZm9yIGZpbmRpbmcgbWF0Y2hlcyBpbiBtYXRjaGxpc3QNCiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKA0KICAgICAgICAgICAgICAiTWF0Y2hsaXN0IEdhbWUgSUQ6ICIsDQogICAgICAgICAgICAgIG1hdGNoTGlzdC5kYXRhLm1hdGNoZXNbMF0uZ2FtZUlkDQogICAgICAgICAgICApOw0KICAgICAgICAgICAgdmFyIG1hdGNoTnVtcyA9IDE1Ow0KICAgICAgICAgICAgaWYgKG1hdGNoTGlzdC5kYXRhLnRvdGFsR2FtZXMgPCAxNSkgew0KICAgICAgICAgICAgICBtYXRjaE51bXMgPSBtYXRjaExpc3QuZGF0YS50b3RhbEdhbWVzOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGtpbGxjb3VudCA9IDA7DQogICAgICAgICAgICB2YXIgZGVhdGhjb3VudCA9IDA7DQogICAgICAgICAgICB2YXIgYXNzaXN0Q291bnQgPSAwOw0KDQogICAgICAgICAgICAvL3dlIGEgZmV3IGFycmF5cyB0byBjb3VudCByb2xlcywgcXVldWVzLCBhbmQgY2hhbXBpb25zDQogICAgICAgICAgICAvL25vdGljZSB0aGUgdHlwZXNjcmlwdCBzeW50YXggZm9yIGFycmF5cw0KICAgICAgICAgICAgdmFyIHJvbGVDb3VudDogc3RyaW5nW10gPSBuZXcgQXJyYXkoKTsNCiAgICAgICAgICAgIHZhciBxdWV1ZUNvdW50OiBudW1iZXJbXSA9IG5ldyBBcnJheSgpOw0KICAgICAgICAgICAgdmFyIGNoYW1wSURzOiBudW1iZXJbXSA9IG5ldyBBcnJheSgpOw0KDQogICAgICAgICAgICAvL2dvIHRocm91Z2ggMjAgbWF0Y2hlcyB0byBidWlsZCBzdGF0cyBwcm9maWxlLg0KICAgICAgICAgICAgZm9yIChsZXQgaW1hdGNoID0gMDsgaW1hdGNoIDwgbWF0Y2hOdW1zOyBpbWF0Y2grKykgew0KICAgICAgICAgICAgICAvL3RoaXMgMSBzZWNvbmQgc2xlZXAgaXMgaGVyZSBiZWNhdXNlIHdlIGFyZSByYXRlIGxpbWl0ZWQgZnJvbSByaW90IEFQSQ0KDQogICAgICAgICAgICAgIC8vZGVhbCB3aXRoIGRhdGEgaW1tZWRpYXRlbHkgYXZhaWxhYmxsZSBmcm9tIG1hdGNobGlzdA0KICAgICAgICAgICAgICAvL2FkZCBmaXJzdCBtYXRjaCBkYXRhIGlmIG5vIG90aGVyIG1hdGNoZXMgYWRkZWQgeWV0DQogICAgICAgICAgICAgIC8vYWRkaW5nIHJvbGVzDQogICAgICAgICAgICAgIGlmIChyb2xlQ291bnQubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgcm9sZUNvdW50LnB1c2gobWF0Y2hMaXN0LmRhdGEubWF0Y2hlc1tpbWF0Y2hdLnJvbGUpOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKA0KICAgICAgICAgICAgICAgICAgImFkZGluZyBmaXJzdCByb2xlOiAiLA0KICAgICAgICAgICAgICAgICAgbWF0Y2hMaXN0LmRhdGEubWF0Y2hlc1tpbWF0Y2hdLnJvbGUNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmICghcm9sZUNvdW50LmluY2x1ZGVzKG1hdGNoTGlzdC5kYXRhLm1hdGNoZXNbaW1hdGNoXS5yb2xlKSkgew0KICAgICAgICAgICAgICAgICAgcm9sZUNvdW50LnB1c2gobWF0Y2hMaXN0LmRhdGEubWF0Y2hlc1tpbWF0Y2hdLnJvbGUpOw0KICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coDQogICAgICAgICAgICAgICAgICAgICJhZGRpbmcgbmV3ICByb2xlIiwNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hMaXN0LmRhdGEubWF0Y2hlc1tpbWF0Y2hdLnJvbGUNCiAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgLy9hZGRpbmcgcXVldWVzDQogICAgICAgICAgICAgIGlmIChxdWV1ZUNvdW50Lmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKA0KICAgICAgICAgICAgICAgICAgImFkZGluZyBmaXJzdCBxdWV1ZTogIiwNCiAgICAgICAgICAgICAgICAgIG1hdGNoTGlzdC5kYXRhLm1hdGNoZXNbaW1hdGNoXS5xdWV1ZQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgcXVldWVDb3VudC5wdXNoKG1hdGNoTGlzdC5kYXRhLm1hdGNoZXNbaW1hdGNoXS5xdWV1ZSk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgIXF1ZXVlQ291bnQuaW5jbHVkZXMobWF0Y2hMaXN0LmRhdGEubWF0Y2hlc1tpbWF0Y2hdLnF1ZXVlKQ0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgcXVldWVDb3VudC5wdXNoKG1hdGNoTGlzdC5kYXRhLm1hdGNoZXNbaW1hdGNoXS5xdWV1ZSk7DQogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygNCiAgICAgICAgICAgICAgICAgICAgImFkZGluZyBuZXcgIHF1ZXVlIiwNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hMaXN0LmRhdGEubWF0Y2hlc1tpbWF0Y2hdLnF1ZXVlDQogICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIC8vYWRkaW5nIGNoYW1wIGRhdGENCiAgICAgICAgICAgICAgaWYgKGNoYW1wSURzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgIGNoYW1wSURzLnB1c2gobWF0Y2hMaXN0LmRhdGEubWF0Y2hlc1tpbWF0Y2hdLmNoYW1waW9uKTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAhY2hhbXBJRHMuaW5jbHVkZXMobWF0Y2hMaXN0LmRhdGEubWF0Y2hlc1tpbWF0Y2hdLmNoYW1waW9uKQ0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgY2hhbXBJRHMucHVzaChtYXRjaExpc3QuZGF0YS5tYXRjaGVzW2ltYXRjaF0uY2hhbXBpb24pOw0KICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coDQogICAgICAgICAgICAgICAgICAgICJhZGRpbmcgbmV3ICBjaGFtcGlvbiIsDQogICAgICAgICAgICAgICAgICAgIG1hdGNoTGlzdC5kYXRhLm1hdGNoZXNbaW1hdGNoXS5jaGFtcGlvbg0KICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQXhpb3MgZm9yIG1hdGNoOiAiLCBpbWF0Y2gpOw0KICAgICAgICAgICAgICAvL2NhbGwgQVBJIGZvciBlYWNoIG1hdGNoDQogICAgICAgICAgICAgIGF3YWl0IGF4aW9zDQogICAgICAgICAgICAgICAgLmdldCgNCiAgICAgICAgICAgICAgICAgICJodHRwczovL25hMS5hcGkucmlvdGdhbWVzLmNvbS9sb2wvbWF0Y2gvdjQvbWF0Y2hlcy8iICsNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hMaXN0LmRhdGEubWF0Y2hlc1tpbWF0Y2hdLmdhbWVJZCArDQogICAgICAgICAgICAgICAgICAgICI/YXBpX2tleT1SR0FQSS1jMjY3ZTNlOC04N2NkLTQ0ZmUtODlhYi1hZmE4ZjhmZDFkYzkiDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIChtb3N0UmVjZW50TWF0Y2gpID0+IHsNCiAgICAgICAgICAgICAgICAgIC8vYXNzaWduaW5nIG1vc3QgcmVjZW50IG1hdGNoIGRhdGEgdG8gZGlzcGxheSBieSBwYXJzaW5nIHRoZSBqc29uDQoNCiAgICAgICAgICAgICAgICAgIC8vc2V0dGluZyBiYXNpYyBnYW1lIGRhdGEgZm9yIHJlY2VudCBtYXRjaA0KICAgICAgICAgICAgICAgICAgLy9pZiBpID09PSAwLCB0aGVuIHRoaXMgaXMgdGhlIG1vc3QgcmVjZW50IG1hdGNoIGRhdGENCiAgICAgICAgICAgICAgICAgIGlmIChpbWF0Y2ggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0TWF0Y2guZ2FtZU1vZGUgPSBtb3N0UmVjZW50TWF0Y2guZGF0YS5nYW1lTW9kZTsNCiAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZShtb3N0UmVjZW50TWF0Y2guZGF0YS5nYW1lQ3JlYXRpb24pOw0KDQogICAgICAgICAgICAgICAgICAgIHNlbGYubGFzdE1hdGNoLmdhbWVDcmVhdGlvbiA9DQogICAgICAgICAgICAgICAgICAgICAgZGF0ZS5nZXRNb250aCgpICsNCiAgICAgICAgICAgICAgICAgICAgICAiIC8gIiArDQogICAgICAgICAgICAgICAgICAgICAgZGF0ZS5nZXREYXkoKSArDQogICAgICAgICAgICAgICAgICAgICAgIiAvICIgKw0KICAgICAgICAgICAgICAgICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0TWF0Y2guZ2FtZUR1cmF0aW9uID0NCiAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShtb3N0UmVjZW50TWF0Y2guZGF0YS5nYW1lRHVyYXRpb24gKiAxMDAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLmdldE1pbnV0ZXMoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRvTG9jYWxlU3RyaW5nKCkgKyAiIG1pbiI7DQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIC8qU2VhcmNoIHRocm91Z2ggcGFydGljaXBhbnQgaWRlbnRpdGllcyB0byBmaW5kIHRoZSBjb3JyZWN0IGRhdGEqLw0KICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIC8vaWYgY29ycmVjdCBzdW1tb25lciBpcyBmb3VuZCBmaWxsIGRhdGENCiAgICAgICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3VtbW9uZXJOYW1lID09PQ0KICAgICAgICAgICAgICAgICAgICAgIG1vc3RSZWNlbnRNYXRjaC5kYXRhLnBhcnRpY2lwYW50SWRlbnRpdGllc1tpXS5wbGF5ZXINCiAgICAgICAgICAgICAgICAgICAgICAgIC5zdW1tb25lck5hbWUNCiAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgICAgbW9zdFJlY2VudE1hdGNoLmRhdGEucGFydGljaXBhbnRzW2ldLnN0YXRzLndpbiA9PT0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGF0cy53aW5zID0gc2VsZi5zdGF0cy53aW5zICsgMTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTZWxmLnN0YXRzLndpbnMrKyIsIHNlbGYuc3RhdHMud2lucyk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hdGNoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGFzdE1hdGNoLndpbiA9ICJWaWN0b3J5IjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGF0cy5sb3NzZXMgPSBzZWxmLnN0YXRzLmxvc3NlcyArIDE7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiU2VsZi5zdGF0cy5sb3NzZXMrKyIsIHNlbGYuc3RhdHMubG9zc2VzKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltYXRjaCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxhc3RNYXRjaC53aW4gPSAiRGVmZWF0IjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgLy9pZiBsYXN0IG1hdGNoIHRoZW4gc2F2ZSBpdCBhcyBpbWFnZSB0byBiZSBkaXNwbGF5ZWQgYXQgdGhlIHRvcA0KICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWF0Y2ggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGFzdE1hdGNoLmNoYW1waW9uSWQgPQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBtb3N0UmVjZW50TWF0Y2guZGF0YS5wYXJ0aWNpcGFudHNbaV0uY2hhbXBpb25JZDsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vbmVlZCB0byBhZGQgaXQvIGluc3RhdGlhdGUgYXJyYXkNCiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgY2hhbXBpb25zIHRvIGNoYW1waW9uIGFycmF5IHRvIGRpc3BsYXkNCiAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAvL2lmIG1hdGNoIGluZGV4ID09PSAwIHN0b3JlIGl0ZW0gaW5mbyBmcm9tIG1vc3QgcmVjZW50IG1hdGNoDQogICAgICAgICAgICAgICAgICAgICAgaWYgKGltYXRjaCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy9pdGVtIGluZm8NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vYmFzZSBpdGVtIHVybCBodHRwOi8vZGRyYWdvbi5sZWFndWVvZmxlZ2VuZHMuY29tL2Nkbi8xMS4yLjEvaW1nL2l0ZW0ve3tJdGVtTnVtYmVyfX0ucG5nDQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxhc3RNYXRjaC5pdGVtMCA9DQogICAgICAgICAgICAgICAgICAgICAgICAgICJodHRwOi8vZGRyYWdvbi5sZWFndWVvZmxlZ2VuZHMuY29tL2Nkbi8xMS4yLjEvaW1nL2l0ZW0vIiArDQogICAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RSZWNlbnRNYXRjaC5kYXRhLnBhcnRpY2lwYW50c1tpXS5zdGF0cy5pdGVtMCArDQogICAgICAgICAgICAgICAgICAgICAgICAgICIucG5nIjsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0TWF0Y2guaXRlbTEgPQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAiaHR0cDovL2RkcmFnb24ubGVhZ3Vlb2ZsZWdlbmRzLmNvbS9jZG4vMTEuMi4xL2ltZy9pdGVtLyIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICBtb3N0UmVjZW50TWF0Y2guZGF0YS5wYXJ0aWNpcGFudHNbaV0uc3RhdHMuaXRlbTEgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAiLnBuZyI7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxhc3RNYXRjaC5pdGVtMiA9DQogICAgICAgICAgICAgICAgICAgICAgICAgICJodHRwOi8vZGRyYWdvbi5sZWFndWVvZmxlZ2VuZHMuY29tL2Nkbi8xMS4yLjEvaW1nL2l0ZW0vIiArDQogICAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RSZWNlbnRNYXRjaC5kYXRhLnBhcnRpY2lwYW50c1tpXS5zdGF0cy5pdGVtMiArDQogICAgICAgICAgICAgICAgICAgICAgICAgICIucG5nIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGFzdE1hdGNoLml0ZW0zID0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9kZHJhZ29uLmxlYWd1ZW9mbGVnZW5kcy5jb20vY2RuLzExLjIuMS9pbWcvaXRlbS8iICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9zdFJlY2VudE1hdGNoLmRhdGEucGFydGljaXBhbnRzW2ldLnN0YXRzLml0ZW0zICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIi5wbmciOw0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0TWF0Y2guaXRlbTQgPQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAiaHR0cDovL2RkcmFnb24ubGVhZ3Vlb2ZsZWdlbmRzLmNvbS9jZG4vMTEuMi4xL2ltZy9pdGVtLyIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICBtb3N0UmVjZW50TWF0Y2guZGF0YS5wYXJ0aWNpcGFudHNbaV0uc3RhdHMuaXRlbTQgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAiLnBuZyI7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxhc3RNYXRjaC5pdGVtNSA9DQogICAgICAgICAgICAgICAgICAgICAgICAgICJodHRwOi8vZGRyYWdvbi5sZWFndWVvZmxlZ2VuZHMuY29tL2Nkbi8xMS4yLjEvaW1nL2l0ZW0vIiArDQogICAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RSZWNlbnRNYXRjaC5kYXRhLnBhcnRpY2lwYW50c1tpXS5zdGF0cy5pdGVtNSArDQogICAgICAgICAgICAgICAgICAgICAgICAgICIucG5nIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGFzdE1hdGNoLml0ZW02ID0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6Ly9kZHJhZ29uLmxlYWd1ZW9mbGVnZW5kcy5jb20vY2RuLzExLjIuMS9pbWcvaXRlbS8iICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9zdFJlY2VudE1hdGNoLmRhdGEucGFydGljaXBhbnRzW2ldLnN0YXRzLml0ZW02ICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIi5wbmciOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgIC8vS0RBDQogICAgICAgICAgICAgICAgICAgICAga2lsbGNvdW50ICs9DQogICAgICAgICAgICAgICAgICAgICAgICBtb3N0UmVjZW50TWF0Y2guZGF0YS5wYXJ0aWNpcGFudHNbaV0uc3RhdHMua2lsbHM7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKGltYXRjaCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0TWF0Y2gua2lsbHMgPQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBtb3N0UmVjZW50TWF0Y2guZGF0YS5wYXJ0aWNpcGFudHNbaV0uc3RhdHMua2lsbHM7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgZGVhdGhjb3VudCArPQ0KICAgICAgICAgICAgICAgICAgICAgICAgbW9zdFJlY2VudE1hdGNoLmRhdGEucGFydGljaXBhbnRzW2ldLnN0YXRzLmRlYXRoczsNCg0KICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWF0Y2ggPT09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGFzdE1hdGNoLmRlYXRocyA9DQogICAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RSZWNlbnRNYXRjaC5kYXRhLnBhcnRpY2lwYW50c1tpXS5zdGF0cy5kZWF0aHM7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgYXNzaXN0Q291bnQgKz0NCiAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RSZWNlbnRNYXRjaC5kYXRhLnBhcnRpY2lwYW50c1tpXS5zdGF0cy5hc3Npc3RzOw0KDQogICAgICAgICAgICAgICAgICAgICAgaWYgKGltYXRjaCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0TWF0Y2guYXNzaXN0cyA9DQogICAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RSZWNlbnRNYXRjaC5kYXRhLnBhcnRpY2lwYW50c1tpXS5zdGF0cy5hc3Npc3RzOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgIC8vY2FsY3VsYXRlIEtpbGwvZGVhdGggcmF0aW8NCiAgICAgICAgICAgICAgICAgICAgICAvL3RoZXNlIGFyZSBvbmx5IHJlbGV2YW50IHRvIG1vc3QgcmVjZW50IG1hdGNoDQogICAgICAgICAgICAgICAgICAgICAgaWYgKGltYXRjaCA9PT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0TWF0Y2gua2RhID0gKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAoc2VsZi5sYXN0TWF0Y2gua2lsbHMgKyBzZWxmLmxhc3RNYXRjaC5hc3Npc3RzKSAvDQogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGFzdE1hdGNoLmRlYXRocw0KICAgICAgICAgICAgICAgICAgICAgICAgKS50b0ZpeGVkKDIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy9uZWVkIGFuIGlmIHRvIGdldCB0aGUgcmlnaHQgc3RyaW5nIGhlcmUNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9zdFJlY2VudE1hdGNoLmRhdGEucGFydGljaXBhbnRzW2ldLnN0YXRzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxhcmdlc3RNdWx0aUtpbGwgPT09IDINCiAgICAgICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxhc3RNYXRjaC5sYXJnZXN0TXVsdGlLaWxsID0gIkRvdWJsZSBLaWxsIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RSZWNlbnRNYXRjaC5kYXRhLnBhcnRpY2lwYW50c1tpXS5zdGF0cw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sYXJnZXN0TXVsdGlLaWxsID09PSAzDQogICAgICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0TWF0Y2gubGFyZ2VzdE11bHRpS2lsbCA9ICJUcmlwbGUgS2lsbCI7DQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgICAgICBtb3N0UmVjZW50TWF0Y2guZGF0YS5wYXJ0aWNpcGFudHNbaV0uc3RhdHMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubGFyZ2VzdE11bHRpS2lsbCA9PT0gNA0KICAgICAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGFzdE1hdGNoLmxhcmdlc3RNdWx0aUtpbGwgPSAiUXVhZHJhS2lsIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RSZWNlbnRNYXRjaC5kYXRhLnBhcnRpY2lwYW50c1tpXS5zdGF0cw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sYXJnZXN0TXVsdGlLaWxsID09PSA1DQogICAgICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0TWF0Y2gubGFyZ2VzdE11bHRpS2lsbCA9ICJQZW50YSBLaWxsIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RSZWNlbnRNYXRjaC5kYXRhLnBhcnRpY2lwYW50c1tpXS5zdGF0cw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sYXJnZXN0TXVsdGlLaWxsID09PSA2DQogICAgICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0TWF0Y2gubGFyZ2VzdE11bHRpS2lsbCA9ICJIZXhhIEtpbGwiOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0TWF0Y2gubGFyZ2VzdE11bHRpS2lsbCA9ICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxhc3RNYXRjaC5jaGFtcExldmVsID0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9zdFJlY2VudE1hdGNoLmRhdGEucGFydGljaXBhbnRzW2ldLnN0YXRzLmNoYW1wTGV2ZWw7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGFzdE1hdGNoLnRvdGFsTWluaW9uc0tpbGxlZCA9DQogICAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RSZWNlbnRNYXRjaC5kYXRhLnBhcnRpY2lwYW50c1sNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpDQogICAgICAgICAgICAgICAgICAgICAgICAgIF0uc3RhdHMudG90YWxNaW5pb25zS2lsbGVkOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBzcGVsbHMgYnkgc3BlbGwgaWQgLSB1c2luZyB0aGUgbG9sIHNwZWxscyBwYWNrYWdlIGZvciB0aGlzLg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3BlbGwgaW5mbw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL2RkcmFnb24ubGVhZ3Vlb2ZsZWdlbmRzLmNvbS9jZG4vMTEuMi4xL2ltZy9zcGVsbC97e3NwZWxsbmFtZX19LnBuZw0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sYXN0TWF0Y2guc3BlbGwxSWQgPQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBtb3N0UmVjZW50TWF0Y2guZGF0YS5wYXJ0aWNpcGFudHNbaV0uc3BlbGwxSWQ7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxhc3RNYXRjaC5zcGVsbDJJZCA9DQogICAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RSZWNlbnRNYXRjaC5kYXRhLnBhcnRpY2lwYW50c1tpXS5zcGVsbDJJZDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGVsbHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jaGVjayBmb3Igc3BlbGwgMQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlbGxzW2ldLmtleSA9PT0gU3RyaW5nKHNlbGYubGFzdE1hdGNoLnNwZWxsMUlkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxhc3RNYXRjaC5zcGVsbDFJY29uID0gc3BlbGxzW2ldLmljb247DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0gLy9jaGVjayBmb3Igc3BlbGwgMg0KICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVsbHNbaV0ua2V5ID09PSBTdHJpbmcoc2VsZi5sYXN0TWF0Y2guc3BlbGwySWQpDQogICAgICAgICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGFzdE1hdGNoLnNwZWxsMkljb24gPSBzcGVsbHNbaV0uaWNvbjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAoaW1hdGNoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgLy8gICAvLyBXRSBkbyBub3QgbmVlZCB0byBjYWxsIHRoaXMgaW4gdGhpcyBsb29wLCBjYWxsIG9uY2Ugd2l0aCBhcnJheSBvZiBjaGFtcGlvbnMgISEhISEhISEhISEhIQ0KICAgICAgICAgICAgICAgICAgICAgIC8vICAgLy9maW5kIHRoZSBjaGFtcGlvbiBmcm9tIHRoZSBjaGFtcGlvbiBJZA0KDQogICAgICAgICAgICAgICAgICAgICAgLy8gICBhd2FpdCBheGlvcw0KICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAuZ2V0KA0KICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICJodHRwOi8vZGRyYWdvbi5sZWFndWVvZmxlZ2VuZHMuY29tL2Nkbi8xMS4yLjEvZGF0YS9lbl9VUy9jaGFtcGlvbi5qc29uIg0KICAgICAgICAgICAgICAgICAgICAgIC8vICAgICApDQogICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC50aGVuKChjaGFtcGlvbkluZm8pID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAvL3N0YXRpY2FsbHkgdXNpbmcgbnVtYmVyIG9mIGN1cnJlbnQgY2hhbXBpb25zIDEvMzEvMjEgbWlnaHQgY2hhbmdlIGluIHRoZSBmdXR1cmUNCg0KICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgIGxldCBvYmogPSBjaGFtcGlvbkluZm8uZGF0YS5kYXRhOw0KDQogICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgLy90aGlzIGZvciBsb29wIHRvb2sgZm9yZXZlciB0byBmaWd1cmUgb3V0LA0KICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgIC8vIHRoZSBqc29uIGlzIGZvcm1hdHRlZCBpbiBhIHdlaXJkIHdheQ0KICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsNCiAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGxldCBjaGFtcCA9IGNoYW1waW9uSW5mby5kYXRhLmRhdGFba2V5XTsNCg0KICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICBjaGFtcC5rZXkgPT09IFN0cmluZyhzZWxmLmxhc3RNYXRjaC5jaGFtcGlvbklkKQ0KICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgIHNlbGYubGFzdE1hdGNoLmNoYW1waW9uTmFtZSA9IGNoYW1wLm5hbWU7DQogICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgIHNlbGYubGFzdE1hdGNoLmNoYW1wQXJ0VVJMID0NCiAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAiaHR0cDovL2RkcmFnb24ubGVhZ3Vlb2ZsZWdlbmRzLmNvbS9jZG4vMTEuMi4xL2ltZy9jaGFtcGlvbi8iICsNCiAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBjaGFtcC5uYW1lLnNwbGl0KCIgIikuam9pbigiIikgKw0KICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICIucG5nIjsNCiAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5jYXRjaCgoZSkgPT4gY29uc29sZS5sb2coIkVycm9yOiAiLCBlKSk7DQogICAgICAgICAgICAgICAgICAgICAgLy8gfQ0KDQogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkZvdW5kIFN1bW1vbmVyIEAgaW5kZXg6ICIsIGkpOw0KICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgICAgIC8vQmVsb3cgaSdtIGp1c3QgbG9nZ2luZyBhbnkgZXJyb3JzIGZyb20gdGhpcyBheGlvcyBjYWxscw0KICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gY29uc29sZS5sb2coIkVycm9yOiAiLCBlKSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKA0KICAgICAgICAgICAgICAiQXN5bmMgdGhyZWFkIGNvbXBsZXRlICEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhIg0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgLy91c2luZyBjaGFtcGlvbiBpZCdzIHRvIGVudGVyIGRhdGEgZm9yIGFycmF5IG9mIGltYWdlcw0KICAgICAgICAgICAgLy9nZXQgbW9zdCByZWNlbnQgbWF0Y2ggZGF0YQ0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFtcGlvbnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgaWYgKGNoYW1waW9uc1tpXS5rZXkgPT09IFN0cmluZyhjaGFtcElEc1swXSkpIHsNCiAgICAgICAgICAgICAgICAoc2VsZi5sYXN0TWF0Y2guY2hhbXBpb25JZCA9IGNoYW1waW9uc1tpXS5rZXkpLA0KICAgICAgICAgICAgICAgICAgKHNlbGYubGFzdE1hdGNoLmNoYW1waW9uTmFtZSA9IGNoYW1waW9uc1tpXS5pZCk7DQogICAgICAgICAgICAgICAgc2VsZi5sYXN0TWF0Y2guY2hhbXBBcnRVUkwgPSBjaGFtcGlvbnNbaV0uaWNvbjsNCg0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJhZGRpbmcgY2hhbXBpb24gZGF0YSIpOw0KICAgICAgICAgICAgY2hhbXBJRHMuZm9yRWFjaCgoaWQpID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coaWQpOw0KICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYW1waW9ucy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIC8vaWYgaWQgYW5kIGtleSBtYXRjaGVzIHRoZW4gaW5pdGlhbGl6ZSBkYXRhIGFuZCBlbmQgbG9vcA0KDQogICAgICAgICAgICAgICAgaWYgKGNoYW1waW9uc1tpXS5rZXkgPT09IFN0cmluZyhpZCkpIHsNCiAgICAgICAgICAgICAgICAgIHNlbGYucmVjZW50Q2hhbXBpb25zLnB1c2goDQogICAgICAgICAgICAgICAgICAgIG5ldyBDaGFtcGlvbigNCiAgICAgICAgICAgICAgICAgICAgICBjaGFtcGlvbnNbaV0ua2V5LA0KICAgICAgICAgICAgICAgICAgICAgIGNoYW1waW9uc1tpXS5pZCwNCiAgICAgICAgICAgICAgICAgICAgICBjaGFtcGlvbnNbaV0uaWNvbg0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy9hZnRlciB0aGUgZm9yIGxvb3AgdGhyb3VnaCBtYXRjaCBsaXN0DQogICAgICAgICAgICAvL2NhbGN1bGF0ZSBhdmVyYWdlcw0KICAgICAgICAgICAgc2VsZi5zdGF0cy5hdmdfS2lsbHMgPSAoa2lsbGNvdW50IC8gbWF0Y2hOdW1zKS50b0ZpeGVkKDIpOw0KICAgICAgICAgICAgc2VsZi5zdGF0cy5hdmdfRGVhdGggPSAoZGVhdGhjb3VudCAvIG1hdGNoTnVtcykudG9GaXhlZCgyKTsNCiAgICAgICAgICAgIHNlbGYuc3RhdHMuYXZnX2Fzc2lzdHMgPSAoYXNzaXN0Q291bnQgLyBtYXRjaE51bXMpLnRvRml4ZWQoMik7DQogICAgICAgICAgICBzZWxmLnN0YXRzLmRpZmZfUm9sZXMgPSByb2xlQ291bnQubGVuZ3RoOw0KICAgICAgICAgICAgc2VsZi5zdGF0cy5kaWZmX1F1ZXVlcyA9IHF1ZXVlQ291bnQubGVuZ3RoOw0KICAgICAgICAgICAgc2VsZi5zdGF0cy5kaWZmX0NoYW1waW9ucyA9IGNoYW1wSURzLmxlbmd0aDsNCiAgICAgICAgICAgIHNlbGYuc3RhdHMud2luX1JhdGUgPQ0KICAgICAgICAgICAgICAoKHNlbGYuc3RhdHMud2lucyAvIG1hdGNoTnVtcykgKiAxMDApLnRvRml4ZWQoMCkgKyAiJSI7DQogICAgICAgICAgfSkNCg0KICAgICAgICAgIC5jYXRjaCgoZSkgPT4gY29uc29sZS5sb2coIkVycm9yOiAiLCBlKSk7DQogICAgICB9KQ0KICAgICAgLmNhdGNoKChlKSA9PiBjb25zb2xlLmxvZygiRXJyb3I6ICIsIGUpKTsNCiAgfQ0KDQogIC8vIENoZWNrIGlmIHRoZSBpdGVtcyBleGlzdCBiZWZvcmUgcmVuZGVyaW5nIHRoZW0NCiAgZ2V0IGl0ZW0wZXhpc3RzKCkgew0KICAgIHJldHVybiAoDQogICAgICB0aGlzLmxhc3RNYXRjaC5pdGVtMCAhPQ0KICAgICAgImh0dHA6Ly9kZHJhZ29uLmxlYWd1ZW9mbGVnZW5kcy5jb20vY2RuLzExLjIuMS9pbWcvaXRlbS8wLnBuZyINCiAgICApOw0KICB9DQogIGdldCBpdGVtMWV4aXN0cygpIHsNCiAgICByZXR1cm4gKA0KICAgICAgdGhpcy5sYXN0TWF0Y2guaXRlbTEgIT0NCiAgICAgICJodHRwOi8vZGRyYWdvbi5sZWFndWVvZmxlZ2VuZHMuY29tL2Nkbi8xMS4yLjEvaW1nL2l0ZW0vMC5wbmciDQogICAgKTsNCiAgfQ0KICBnZXQgaXRlbTJleGlzdHMoKSB7DQogICAgcmV0dXJuICgNCiAgICAgIHRoaXMubGFzdE1hdGNoLml0ZW0yICE9DQogICAgICAiaHR0cDovL2RkcmFnb24ubGVhZ3Vlb2ZsZWdlbmRzLmNvbS9jZG4vMTEuMi4xL2ltZy9pdGVtLzAucG5nIg0KICAgICk7DQogIH0NCiAgZ2V0IGl0ZW0zZXhpc3RzKCkgew0KICAgIHJldHVybiAoDQogICAgICB0aGlzLmxhc3RNYXRjaC5pdGVtMyAhPQ0KICAgICAgImh0dHA6Ly9kZHJhZ29uLmxlYWd1ZW9mbGVnZW5kcy5jb20vY2RuLzExLjIuMS9pbWcvaXRlbS8wLnBuZyINCiAgICApOw0KICB9DQogIGdldCBpdGVtNGV4aXN0cygpIHsNCiAgICByZXR1cm4gKA0KICAgICAgdGhpcy5sYXN0TWF0Y2guaXRlbTQgIT0NCiAgICAgICJodHRwOi8vZGRyYWdvbi5sZWFndWVvZmxlZ2VuZHMuY29tL2Nkbi8xMS4yLjEvaW1nL2l0ZW0vMC5wbmciDQogICAgKTsNCiAgfQ0KICBnZXQgaXRlbTVleGlzdHMoKSB7DQogICAgcmV0dXJuICgNCiAgICAgIHRoaXMubGFzdE1hdGNoLml0ZW01ICE9DQogICAgICAiaHR0cDovL2RkcmFnb24ubGVhZ3Vlb2ZsZWdlbmRzLmNvbS9jZG4vMTEuMi4xL2ltZy9pdGVtLzAucG5nIg0KICAgICk7DQogIH0NCiAgZ2V0IGl0ZW02ZXhpc3RzKCkgew0KICAgIHJldHVybiAoDQogICAgICB0aGlzLmxhc3RNYXRjaC5pdGVtNiAhPQ0KICAgICAgImh0dHA6Ly9kZHJhZ29uLmxlYWd1ZW9mbGVnZW5kcy5jb20vY2RuLzExLjIuMS9pbWcvaXRlbS8wLnBuZyINCiAgICApOw0KICB9DQp9DQo="},{"version":3,"sources":["Stats.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6JA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Stats.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"home-container\">\r\n    <div v-if=\"summonerDataAvailable\">\r\n      <!-- Info that is displayed from data pullled from launcher\r\n       img src is being dynamically set-->\r\n      <div class=\"mini-summoner-label\">\r\n        <img\r\n          alt=\"Profile Icon\"\r\n          class=\"mini_league_profile\"\r\n          :srcset=\"profile_icon_id_url\"\r\n        />\r\n        <h1>{{ summonerName }}</h1>\r\n      </div>\r\n\r\n      <div class=\"last-game-stats\">\r\n        <div class=\"last-game-col1\">\r\n          <q>{{ lastMatch.gameMode }}</q>\r\n          {{ lastMatch.gameCreation }} <br />\r\n          {{ lastMatch.win }} <br />\r\n          {{ lastMatch.gameDuration }} <br />\r\n        </div>\r\n        <div class=\"last-game-col1\">\r\n          <div class=\"row\">\r\n            <img\r\n              alt=\"Profile Icon\"\r\n              class=\"minier_league_profile\"\r\n              :srcset=\"lastMatch.champArtURL\"\r\n            />\r\n            <div class=\"col\">\r\n              <img\r\n                alt=\"Profile Icon\"\r\n                class=\"miniest_league_profile\"\r\n                :srcset=\"lastMatch.spell1Icon\"\r\n              />\r\n              <img\r\n                alt=\"Profile Icon\"\r\n                class=\"miniest_league_profile\"\r\n                :srcset=\"lastMatch.spell2Icon\"\r\n              />\r\n            </div>\r\n          </div>\r\n          {{ lastMatch.championName }} <br />\r\n        </div>\r\n\r\n        <!-- KDA Column -->\r\n        <div class=\"last-game-col1\">\r\n          {{ lastMatch.kills }} / {{ lastMatch.deaths }} /\r\n          {{ lastMatch.assists }} <br />\r\n          {{ lastMatch.kda }} : 1 KDA <br />\r\n          {{ lastMatch.largestMultiKill }}\r\n        </div>\r\n\r\n        <!-- Item images -->\r\n        <div class=\"wrap-col\">\r\n          <div v-if=\"item0exists\">\r\n            <img\r\n              alt=\"Profile Icon\"\r\n              class=\"miniest_league_profile\"\r\n              :srcset=\"lastMatch.item0\"\r\n            />\r\n          </div>\r\n          <div v-if=\"item1exists\">\r\n            <img\r\n              alt=\"Profile Icon\"\r\n              class=\"miniest_league_profile\"\r\n              :srcset=\"lastMatch.item1\"\r\n            />\r\n          </div>\r\n          <div v-if=\"item2exists\">\r\n            <img\r\n              alt=\"Profile Icon\"\r\n              class=\"miniest_league_profile\"\r\n              :srcset=\"lastMatch.item2\"\r\n            />\r\n          </div>\r\n          <div v-if=\"item3exists\">\r\n            <img\r\n              alt=\"Profile Icon\"\r\n              class=\"miniest_league_profile\"\r\n              :srcset=\"lastMatch.item3\"\r\n            />\r\n          </div>\r\n          <div v-if=\"item4exists\">\r\n            <img\r\n              alt=\"Profile Icon\"\r\n              class=\"miniest_league_profile\"\r\n              :srcset=\"lastMatch.item4\"\r\n            />\r\n          </div>\r\n          <div v-if=\"item5exists\">\r\n            <img\r\n              alt=\"Profile Icon\"\r\n              class=\"miniest_league_profile\"\r\n              :srcset=\"lastMatch.item5\"\r\n            />\r\n          </div>\r\n          <div v-if=\"item6exists\">\r\n            <img\r\n              alt=\"Profile Icon\"\r\n              class=\"miniest_league_profile\"\r\n              :srcset=\"lastMatch.item6\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"last-game-col1\">\r\n          Lvl: {{ lastMatch.champLevel }} <br />\r\n          {{ lastMatch.totalMinionsKilled }} cs<br />\r\n        </div>\r\n      </div>\r\n      <div class=\"stats-overall\">\r\n        <u class=\"little-bigger\">Last 15 games Statistics</u>\r\n        <br />\r\n        <div class=\"grid-container\">\r\n          <div class=\"grid-item\">{{ stats.wins }} Wins</div>\r\n          <div class=\"grid-item\">{{ stats.losses }} Losses</div>\r\n          <div class=\"grid-item\">{{ stats.win_Rate }}Win Rate</div>\r\n          <div class=\"grid-item\">{{ stats.avg_Kills }} AVG Kills</div>\r\n          <div class=\"grid-item\">{{ stats.avg_Death }} Avg Death</div>\r\n          <div class=\"grid-item\">{{ stats.avg_assists }} Avg assists</div>\r\n          <div class=\"grid-item\">{{ stats.diff_Champions }} Diff Champions</div>\r\n          <div class=\"grid-item\">{{ stats.diff_Roles }} Diff Roles</div>\r\n          <div class=\"grid-item\">{{ stats.diff_Queues }} Diff Queues</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"stats-overall\">\r\n        <u class =\"little-bigger\">Recent Champions</u><br />\r\n        <div class=\"wrap\">\r\n          <div v-for=\"champion in recentChampions\" :key=\"champion.id\">\r\n          <div class=\"col-recent-champ\">\r\n            <img class=\"recent-champs\" :srcset=\"getChampURL(champion)\" alt=\"champion\" height=\"50\" width=\"50\">\r\n            {{champion.name}}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else>\r\n      <!-- If the launcher is not running it cant display info, so this is the placeholder-->\r\n      <!-- TODO #8 We need to save the information pulled from the launcher so that the program\r\n       knows their summoner data. Whether locally or on a database, then we can have home page\r\n        check to see if we've already saved summoner data -->\r\n      <img\r\n        alt=\"League Companion\"\r\n        class=\"logo\"\r\n        height=\"300\"\r\n        width=\"300\"\r\n        src=\"https://img.icons8.com/bubbles/500/000000/question-mark.png\"\r\n      />\r\n      <p>Launch your League Client to fetch your stats</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue } from \"vue-property-decorator\";\r\nimport axios from \"axios\";\r\n// @ts-ignore\r\nimport spells from \"lol-spells\";\r\n// @ts-ignore\r\nimport champions from \"lol-champions\";\r\n\r\nclass Champion {\r\n  id: number;\r\n  name: string;\r\n  url: string;\r\n\r\n  constructor(id, name, url) {\r\n    this.id = id;\r\n    this.name = name;\r\n    this.url = url;\r\n  }\r\n}\r\n\r\n@Component\r\nexport default class Stats extends Vue {\r\n  infoAvailable = true;\r\n  summoner_info = null;\r\n  summonerName = \"Doublelift\";\r\n  profile_icon_id_url =\r\n    \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/profileicon/12.png\";\r\n  summonerLevel = \"\";\r\n\r\n  // these are needed for API calls for stats\r\n  encypted_summoner_id = \"\";\r\n  encypted_account_id = \"\";\r\n\r\n  recentChampions: Champion[] = new Array();\r\n\r\n  lastMatch = {\r\n    //ARAM & Normals\r\n    gameMode: \"ARAM\",\r\n    //game started & duration\r\n    gameCreation: new Date(1611790864204).toLocaleDateString(),\r\n    gameDuration: new Date(820543543).toTimeString(),\r\n    //win or lose\r\n    win: \"Win\",\r\n    //Champion Used\r\n    championId: 0,\r\n    championName: \"\",\r\n    champArtURL: \"\",\r\n    //Starter spells like Flash or Heal\r\n    //these are img urls, but i can look for the names if we need them\r\n    spell1Id: \"\",\r\n    spell1Icon: \"\",\r\n    spell2Id: \"\",\r\n    spell2Icon: \"\",\r\n\r\n    //Items used in match\r\n    item0: \"\",\r\n    item1: \"\",\r\n    item2: \"\",\r\n    item3: \"\",\r\n    item4: \"\",\r\n    item5: \"\",\r\n    item6: \"\",\r\n    //KDA\r\n    kills: 0,\r\n    deaths: 0,\r\n    assists: 0,\r\n    kda: \"-1.1\",\r\n    // multikills\r\n    largestMultiKill: \"\",\r\n    champLevel: 15,\r\n    //minion kills & cs\r\n    totalMinionsKilled: 31,\r\n    //optionally we can add Kill participation. calculated by kills plus assists and dividing that by their team's total kills.\r\n    //we can also add all the plalyers in the game\r\n    //this is what i modeled the data off of https://na.op.gg/summoner/userName=doublelift\r\n  };\r\n\r\n  //this object will be used for stats to display\r\n  stats = {\r\n    wins: 0,\r\n    avg_Kills: \"\",\r\n    diff_Champions: 0,\r\n    losses: 0,\r\n    avg_assists: \"\",\r\n    diff_Roles: 0,\r\n    win_Rate: \"\",\r\n    avg_Death: \"\",\r\n    diff_Queues: 0,\r\n  };\r\n\r\n  get summonerDataAvailable() {\r\n    return this.infoAvailable;\r\n  }\r\n\r\n  //this is for the v-for for champ images\r\n  getChampURL( champ:Champion){\r\n    console.log(\"champ\", champ)\r\n    return champ.url;\r\n  }\r\n\r\n  //This page will use the same launcher info as before\r\n  //TODO: #9 Send User info between desktop components from home menu rather than use overwolf launcher API. will speed things up\r\n  //connect to overwolf API to gain user data\r\n  mounted() {\r\n    let self = this;\r\n\r\n    //register event listeners\r\n    function registerEvents() {\r\n      // general events errors\r\n      // @ts-ignore\r\n      overwolf.games.events.onError.addListener(function (info) {\r\n        console.log(\"Error: \" + JSON.stringify(info));\r\n      });\r\n\r\n      // \"static\" data changed\r\n      // This will also be triggered the first time we register\r\n      // for events and will contain all the current information\r\n      // @ts-ignore\r\n      overwolf.games.launchers.events.onInfoUpdates.addListener(function (\r\n        info\r\n      ) {\r\n        console.log(\"Info UPDATE: \" + JSON.stringify(info));\r\n      });\r\n\r\n      // an event triggered\r\n      // @ts-ignore\r\n      overwolf.games.launchers.events.onNewEvents.addListener(function (info) {\r\n        console.log(\"EVENT FIRED: \" + JSON.stringify(info));\r\n      });\r\n    }\r\n\r\n    function setFeatures() {\r\n      // @ts-ignore\r\n      overwolf.games.launchers.events.setRequiredFeatures(\r\n        10902,\r\n        [\r\n          \"game_flow\",\r\n          \"summoner_info\",\r\n          \"champ_select\",\r\n          \"lcu_info\",\r\n          \"lobby_info\",\r\n          \"end_game\",\r\n          \"game_info\",\r\n        ],\r\n        function (info) {\r\n          if (info.status == \"error\") {\r\n            console.log(\"Could not set required features: \" + info.reason);\r\n            console.log(\"Trying in 2 seconds\");\r\n            window.setTimeout(setFeatures, 2000);\r\n            return;\r\n          }\r\n\r\n          console.log(JSON.stringify(info));\r\n\r\n          // @ts-ignore\r\n          overwolf.games.launchers.events.getInfo(10902, function (info) {\r\n            if (info.status === \"success\") {\r\n              console.log(\"Summoner Info\", info.res.summoner_info.display_name);\r\n\r\n              //filling in data from what the launcher recieves\r\n              self.summoner_info = info.res.summoner_info;\r\n              //FOR TESTING PURPOSES\r\n              //self.summonerName = self.summoner_info.display_name;\r\n              //   self.profile_icon_id_url =\r\n              //     \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/profileicon/\" +\r\n              //     self.summoner_info.profile_icon_id +\r\n              //     \".png\";\r\n              self.summonerLevel = self.summoner_info.summoner_level;\r\n              //randomly chosing splash art from array\r\n\r\n              self.infoAvailable = true;\r\n            }\r\n          });\r\n        }\r\n      );\r\n    }\r\n\r\n    function launcherRunning(launcherInfo) {\r\n      if (!launcherInfo) {\r\n        return false;\r\n      }\r\n\r\n      if (!launcherInfo.launchers[0]) {\r\n        return false;\r\n      }\r\n\r\n      // NOTE: we divide by 10 to get the launcher class id without it's sequence number\r\n      if (Math.floor(launcherInfo.launchers[0].id / 10) != 10902) {\r\n        return false;\r\n      }\r\n\r\n      console.log(\"League of Legends launcher running\");\r\n      return true;\r\n    }\r\n\r\n    //create starting listeners\r\n    // @ts-ignore\r\n    overwolf.games.launchers.onLaunched.addListener(function () {\r\n      registerEvents();\r\n      setTimeout(setFeatures, 1000);\r\n      console.log(\"onLaunched fired\");\r\n    });\r\n    // @ts-ignore\r\n    overwolf.games.launchers.getRunningLaunchersInfo(function (res) {\r\n      if (launcherRunning(res)) {\r\n        registerEvents();\r\n        setTimeout(setFeatures, 1000);\r\n      }\r\n      console.log(\"getRunningLaunchersInfo: \" + JSON.stringify(res));\r\n    });\r\n\r\n    // @ts-ignore\r\n    overwolf.games.launchers.onTerminated.addListener(function (res) {\r\n      setTimeout(window.close, 1000);\r\n    });\r\n  }\r\n\r\n  async created() {\r\n    //create variable for this\r\n    let self = this;\r\n    //create url to call for summoner data\r\n    let summonerInfoURL =\r\n      \"https://na1.api.riotgames.com/lol/summoner/v4/summoners/by-name/\" +\r\n      self.summonerName +\r\n      \"?api_key=RGAPI-c267e3e8-87cd-44fe-89ab-afa8f8fd1dc9\";\r\n    //ACCOUNTID >> MATCHLIST >> LAST MATCH DATA\r\n    console.log(\"SummonerName being queried: \", self.summonerName);\r\n\r\n    //Use axios to call API and get summoner info\r\n    //ACCOUNT ID\r\n    await axios\r\n      .get(summonerInfoURL)\r\n      .then(async (summonerInfo) => {\r\n        //Save encrypted summoner data\r\n        console.log(\"Summoner API CALL RESPONCE: \", summonerInfo);\r\n\r\n        self.encypted_summoner_id = summonerInfo.data.id;\r\n        self.encypted_account_id = summonerInfo.data.accountId;\r\n        //MATCHLIST\r\n        //use axios to get a matchlist from RIOT API\r\n        console.log(\r\n          \"Matchlist queried using encrypted summoner Id: \",\r\n          self.encypted_account_id\r\n        );\r\n        let matchInfoURL =\r\n          \"https://na1.api.riotgames.com/lol/match/v4/matchlists/by-account/\" +\r\n          self.encypted_account_id +\r\n          \"?api_key=RGAPI-c267e3e8-87cd-44fe-89ab-afa8f8fd1dc9\";\r\n\r\n        //Nested Axios Call to recieve data from most recent match and enter it in last match\r\n        await axios\r\n          .get(matchInfoURL)\r\n          .then(async (matchList) => {\r\n            console.log(\"MatchList API CALL RESPONCE: \", matchList);\r\n\r\n            //tsignore removes the error for finding matches in matchlist\r\n            // @ts-ignore\r\n            console.log(\r\n              \"Matchlist Game ID: \",\r\n              matchList.data.matches[0].gameId\r\n            );\r\n            var matchNums = 15;\r\n            if (matchList.data.totalGames < 15) {\r\n              matchNums = matchList.data.totalGames;\r\n            }\r\n            var killcount = 0;\r\n            var deathcount = 0;\r\n            var assistCount = 0;\r\n\r\n            //we a few arrays to count roles, queues, and champions\r\n            //notice the typescript syntax for arrays\r\n            var roleCount: string[] = new Array();\r\n            var queueCount: number[] = new Array();\r\n            var champIDs: number[] = new Array();\r\n\r\n            //go through 20 matches to build stats profile.\r\n            for (let imatch = 0; imatch < matchNums; imatch++) {\r\n              //this 1 second sleep is here because we are rate limited from riot API\r\n\r\n              //deal with data immediately availablle from matchlist\r\n              //add first match data if no other matches added yet\r\n              //adding roles\r\n              if (roleCount.length === 0) {\r\n                roleCount.push(matchList.data.matches[imatch].role);\r\n                console.log(\r\n                  \"adding first role: \",\r\n                  matchList.data.matches[imatch].role\r\n                );\r\n              } else {\r\n                if (!roleCount.includes(matchList.data.matches[imatch].role)) {\r\n                  roleCount.push(matchList.data.matches[imatch].role);\r\n                  console.log(\r\n                    \"adding new  role\",\r\n                    matchList.data.matches[imatch].role\r\n                  );\r\n                }\r\n              }\r\n\r\n              //adding queues\r\n              if (queueCount.length === 0) {\r\n                console.log(\r\n                  \"adding first queue: \",\r\n                  matchList.data.matches[imatch].queue\r\n                );\r\n                queueCount.push(matchList.data.matches[imatch].queue);\r\n              } else {\r\n                if (\r\n                  !queueCount.includes(matchList.data.matches[imatch].queue)\r\n                ) {\r\n                  queueCount.push(matchList.data.matches[imatch].queue);\r\n                  console.log(\r\n                    \"adding new  queue\",\r\n                    matchList.data.matches[imatch].queue\r\n                  );\r\n                }\r\n              }\r\n\r\n              //adding champ data\r\n              if (champIDs.length === 0) {\r\n                champIDs.push(matchList.data.matches[imatch].champion);\r\n              } else {\r\n                if (\r\n                  !champIDs.includes(matchList.data.matches[imatch].champion)\r\n                ) {\r\n                  champIDs.push(matchList.data.matches[imatch].champion);\r\n                  console.log(\r\n                    \"adding new  champion\",\r\n                    matchList.data.matches[imatch].champion\r\n                  );\r\n                }\r\n              }\r\n\r\n              console.log(\"Axios for match: \", imatch);\r\n              //call API for each match\r\n              await axios\r\n                .get(\r\n                  \"https://na1.api.riotgames.com/lol/match/v4/matches/\" +\r\n                    matchList.data.matches[imatch].gameId +\r\n                    \"?api_key=RGAPI-c267e3e8-87cd-44fe-89ab-afa8f8fd1dc9\"\r\n                )\r\n                .then(async (mostRecentMatch) => {\r\n                  //assigning most recent match data to display by parsing the json\r\n\r\n                  //setting basic game data for recent match\r\n                  //if i === 0, then this is the most recent match data\r\n                  if (imatch === 0) {\r\n                    self.lastMatch.gameMode = mostRecentMatch.data.gameMode;\r\n                    let date = new Date(mostRecentMatch.data.gameCreation);\r\n\r\n                    self.lastMatch.gameCreation =\r\n                      date.getMonth() +\r\n                      \" / \" +\r\n                      date.getDay() +\r\n                      \" / \" +\r\n                      date.getFullYear();\r\n                    self.lastMatch.gameDuration =\r\n                      new Date(mostRecentMatch.data.gameDuration * 1000)\r\n                        .getMinutes()\r\n                        .toLocaleString() + \" min\";\r\n                  }\r\n\r\n                  /*Search through participant identities to find the correct data*/\r\n                  for (let i = 0; i < 10; i++) {\r\n                    //if correct summoner is found fill data\r\n                    if (\r\n                      self.summonerName ===\r\n                      mostRecentMatch.data.participantIdentities[i].player\r\n                        .summonerName\r\n                    ) {\r\n                      if (\r\n                        mostRecentMatch.data.participants[i].stats.win === true\r\n                      ) {\r\n                        self.stats.wins = self.stats.wins + 1;\r\n                        console.log(\"Self.stats.wins++\", self.stats.wins);\r\n                        if (imatch === 0) {\r\n                          self.lastMatch.win = \"Victory\";\r\n                        }\r\n                      } else {\r\n                        self.stats.losses = self.stats.losses + 1;\r\n                        console.log(\"Self.stats.losses++\", self.stats.losses);\r\n\r\n                        if (imatch === 0) {\r\n                          self.lastMatch.win = \"Defeat\";\r\n                        }\r\n                      }\r\n                      //if last match then save it as image to be displayed at the top\r\n                      if (imatch === 0) {\r\n                        self.lastMatch.championId =\r\n                          mostRecentMatch.data.participants[i].championId;\r\n                        //need to add it/ instatiate array\r\n                      } else {\r\n                        //add champions to champion array to display\r\n                      }\r\n\r\n                      //if match index === 0 store item info from most recent match\r\n                      if (imatch === 0) {\r\n                        //item info\r\n                        //base item url http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/{{ItemNumber}}.png\r\n                        self.lastMatch.item0 =\r\n                          \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/\" +\r\n                          mostRecentMatch.data.participants[i].stats.item0 +\r\n                          \".png\";\r\n\r\n                        self.lastMatch.item1 =\r\n                          \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/\" +\r\n                          mostRecentMatch.data.participants[i].stats.item1 +\r\n                          \".png\";\r\n                        self.lastMatch.item2 =\r\n                          \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/\" +\r\n                          mostRecentMatch.data.participants[i].stats.item2 +\r\n                          \".png\";\r\n                        self.lastMatch.item3 =\r\n                          \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/\" +\r\n                          mostRecentMatch.data.participants[i].stats.item3 +\r\n                          \".png\";\r\n                        self.lastMatch.item4 =\r\n                          \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/\" +\r\n                          mostRecentMatch.data.participants[i].stats.item4 +\r\n                          \".png\";\r\n                        self.lastMatch.item5 =\r\n                          \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/\" +\r\n                          mostRecentMatch.data.participants[i].stats.item5 +\r\n                          \".png\";\r\n                        self.lastMatch.item6 =\r\n                          \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/\" +\r\n                          mostRecentMatch.data.participants[i].stats.item6 +\r\n                          \".png\";\r\n                      }\r\n\r\n                      //KDA\r\n                      killcount +=\r\n                        mostRecentMatch.data.participants[i].stats.kills;\r\n                      if (imatch === 0) {\r\n                        self.lastMatch.kills =\r\n                          mostRecentMatch.data.participants[i].stats.kills;\r\n                      }\r\n\r\n                      deathcount +=\r\n                        mostRecentMatch.data.participants[i].stats.deaths;\r\n\r\n                      if (imatch === 0) {\r\n                        self.lastMatch.deaths =\r\n                          mostRecentMatch.data.participants[i].stats.deaths;\r\n                      }\r\n\r\n                      assistCount +=\r\n                        mostRecentMatch.data.participants[i].stats.assists;\r\n\r\n                      if (imatch === 0) {\r\n                        self.lastMatch.assists =\r\n                          mostRecentMatch.data.participants[i].stats.assists;\r\n                      }\r\n\r\n                      //calculate Kill/death ratio\r\n                      //these are only relevant to most recent match\r\n                      if (imatch === 0) {\r\n                        self.lastMatch.kda = (\r\n                          (self.lastMatch.kills + self.lastMatch.assists) /\r\n                          self.lastMatch.deaths\r\n                        ).toFixed(2);\r\n                        //need an if to get the right string here\r\n                        if (\r\n                          mostRecentMatch.data.participants[i].stats\r\n                            .largestMultiKill === 2\r\n                        ) {\r\n                          self.lastMatch.largestMultiKill = \"Double Kill\";\r\n                        } else if (\r\n                          mostRecentMatch.data.participants[i].stats\r\n                            .largestMultiKill === 3\r\n                        ) {\r\n                          self.lastMatch.largestMultiKill = \"Triple Kill\";\r\n                        } else if (\r\n                          mostRecentMatch.data.participants[i].stats\r\n                            .largestMultiKill === 4\r\n                        ) {\r\n                          self.lastMatch.largestMultiKill = \"QuadraKil\";\r\n                        } else if (\r\n                          mostRecentMatch.data.participants[i].stats\r\n                            .largestMultiKill === 5\r\n                        ) {\r\n                          self.lastMatch.largestMultiKill = \"Penta Kill\";\r\n                        } else if (\r\n                          mostRecentMatch.data.participants[i].stats\r\n                            .largestMultiKill === 6\r\n                        ) {\r\n                          self.lastMatch.largestMultiKill = \"Hexa Kill\";\r\n                        } else {\r\n                          self.lastMatch.largestMultiKill = \"\";\r\n                        }\r\n\r\n                        self.lastMatch.champLevel =\r\n                          mostRecentMatch.data.participants[i].stats.champLevel;\r\n\r\n                        self.lastMatch.totalMinionsKilled =\r\n                          mostRecentMatch.data.participants[\r\n                            i\r\n                          ].stats.totalMinionsKilled;\r\n\r\n                        // Find the spells by spell id - using the lol spells package for this.\r\n                        // spell info\r\n                        // http://ddragon.leagueoflegends.com/cdn/11.2.1/img/spell/{{spellname}}.png\r\n                        self.lastMatch.spell1Id =\r\n                          mostRecentMatch.data.participants[i].spell1Id;\r\n                        self.lastMatch.spell2Id =\r\n                          mostRecentMatch.data.participants[i].spell2Id;\r\n\r\n                        for (let i = 0; i < spells.length; i++) {\r\n                          //check for spell 1\r\n                          if (\r\n                            spells[i].key === String(self.lastMatch.spell1Id)\r\n                          ) {\r\n                            self.lastMatch.spell1Icon = spells[i].icon;\r\n                          } //check for spell 2\r\n                          else if (\r\n                            spells[i].key === String(self.lastMatch.spell2Id)\r\n                          ) {\r\n                            self.lastMatch.spell2Icon = spells[i].icon;\r\n                          }\r\n                        }\r\n                      }\r\n                      // if (imatch === 0) {\r\n                      //   // WE do not need to call this in this loop, call once with array of champions !!!!!!!!!!!!!\r\n                      //   //find the champion from the champion Id\r\n\r\n                      //   await axios\r\n                      //     .get(\r\n                      //       \"http://ddragon.leagueoflegends.com/cdn/11.2.1/data/en_US/champion.json\"\r\n                      //     )\r\n                      //     .then((championInfo) => {\r\n                      //       //statically using number of current champions 1/31/21 might change in the future\r\n\r\n                      //       let obj = championInfo.data.data;\r\n\r\n                      //       //this for loop took forever to figure out,\r\n                      //       // the json is formatted in a weird way\r\n                      //       for (var key in obj) {\r\n                      //         let champ = championInfo.data.data[key];\r\n\r\n                      //         if (\r\n                      //           champ.key === String(self.lastMatch.championId)\r\n                      //         ) {\r\n                      //           self.lastMatch.championName = champ.name;\r\n                      //           self.lastMatch.champArtURL =\r\n                      //             \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/champion/\" +\r\n                      //             champ.name.split(\" \").join(\"\") +\r\n                      //             \".png\";\r\n                      //         }\r\n                      //       }\r\n                      //     })\r\n                      //     .catch((e) => console.log(\"Error: \", e));\r\n                      // }\r\n\r\n                      console.log(\"Found Summoner @ index: \", i);\r\n                      break;\r\n                    }\r\n                  }\r\n                })\r\n\r\n                //Below i'm just logging any errors from this axios calls\r\n                .catch((e) => console.log(\"Error: \", e));\r\n            }\r\n\r\n            console.log(\r\n              \"Async thread complete !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\"\r\n            );\r\n\r\n            //using champion id's to enter data for array of images\r\n            //get most recent match data\r\n            for (let i = 0; i < champions.length; i++) {\r\n              if (champions[i].key === String(champIDs[0])) {\r\n                (self.lastMatch.championId = champions[i].key),\r\n                  (self.lastMatch.championName = champions[i].id);\r\n                self.lastMatch.champArtURL = champions[i].icon;\r\n\r\n                break;\r\n              }\r\n            }\r\n\r\n            console.log(\"adding champion data\");\r\n            champIDs.forEach((id) => {\r\n              console.log(id);\r\n              for (let i = 0; i < champions.length; i++) {\r\n                //if id and key matches then initialize data and end loop\r\n\r\n                if (champions[i].key === String(id)) {\r\n                  self.recentChampions.push(\r\n                    new Champion(\r\n                      champions[i].key,\r\n                      champions[i].id,\r\n                      champions[i].icon\r\n                    )\r\n                  );\r\n                  break;\r\n                }\r\n              }\r\n            });\r\n\r\n            //after the for loop through match list\r\n            //calculate averages\r\n            self.stats.avg_Kills = (killcount / matchNums).toFixed(2);\r\n            self.stats.avg_Death = (deathcount / matchNums).toFixed(2);\r\n            self.stats.avg_assists = (assistCount / matchNums).toFixed(2);\r\n            self.stats.diff_Roles = roleCount.length;\r\n            self.stats.diff_Queues = queueCount.length;\r\n            self.stats.diff_Champions = champIDs.length;\r\n            self.stats.win_Rate =\r\n              ((self.stats.wins / matchNums) * 100).toFixed(0) + \"%\";\r\n          })\r\n\r\n          .catch((e) => console.log(\"Error: \", e));\r\n      })\r\n      .catch((e) => console.log(\"Error: \", e));\r\n  }\r\n\r\n  // Check if the items exist before rendering them\r\n  get item0exists() {\r\n    return (\r\n      this.lastMatch.item0 !=\r\n      \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/0.png\"\r\n    );\r\n  }\r\n  get item1exists() {\r\n    return (\r\n      this.lastMatch.item1 !=\r\n      \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/0.png\"\r\n    );\r\n  }\r\n  get item2exists() {\r\n    return (\r\n      this.lastMatch.item2 !=\r\n      \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/0.png\"\r\n    );\r\n  }\r\n  get item3exists() {\r\n    return (\r\n      this.lastMatch.item3 !=\r\n      \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/0.png\"\r\n    );\r\n  }\r\n  get item4exists() {\r\n    return (\r\n      this.lastMatch.item4 !=\r\n      \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/0.png\"\r\n    );\r\n  }\r\n  get item5exists() {\r\n    return (\r\n      this.lastMatch.item5 !=\r\n      \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/0.png\"\r\n    );\r\n  }\r\n  get item6exists() {\r\n    return (\r\n      this.lastMatch.item6 !=\r\n      \"http://ddragon.leagueoflegends.com/cdn/11.2.1/img/item/0.png\"\r\n    );\r\n  }\r\n}\r\n</script>"]}]}