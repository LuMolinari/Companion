{"remainingRequest":"C:\\Users\\Molin\\Companion\\in-game\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Molin\\Companion\\in-game\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Molin\\Companion\\in-game\\node_modules\\ts-loader\\index.js??ref--13-3!C:\\Users\\Molin\\Companion\\shared\\libs\\timer.ts","dependencies":[{"path":"C:\\Users\\Molin\\Companion\\shared\\libs\\timer.ts","mtime":1610332830469},{"path":"C:\\Users\\Molin\\Companion\\in-game\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610245778946},{"path":"C:\\Users\\Molin\\Companion\\in-game\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1610245779138},{"path":"C:\\Users\\Molin\\Companion\\in-game\\node_modules\\babel-loader\\lib\\index.js","mtime":1610329795007},{"path":"C:\\Users\\Molin\\Companion\\in-game\\node_modules\\ts-loader\\index.js","mtime":1610329799503}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL01vbGluL0NvbXBhbmlvbi9pbi1nYW1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi9Vc2Vycy9Nb2xpbi9Db21wYW5pb24vaW4tZ2FtZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6L1VzZXJzL01vbGluL0NvbXBhbmlvbi9pbi1nYW1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmV4cG9ydCB2YXIgVGltZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIGZ1bmN0aW9uIFRpbWVyKGRlbGVnYXRlLCBpZCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGltZXIpOwoKICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgdGhpcy5fdGltZXJJZCA9IG51bGw7IC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIHRoaXMuaGFuZGxlVGltZXJFdmVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuX3RpbWVySWQgPSBudWxsOwoKICAgICAgX3RoaXMuX2RlbGVnYXRlLm9uVGltZXIoX3RoaXMuX2lkKTsKICAgIH07CgogICAgdGhpcy5fZGVsZWdhdGUgPSBkZWxlZ2F0ZTsKICAgIHRoaXMuX2lkID0gaWQ7CiAgfSAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgogIF9jcmVhdGVDbGFzcyhUaW1lciwgW3sKICAgIGtleTogInN0YXJ0IiwKICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KGludGVydmFsSW5NUykgewogICAgICB0aGlzLnN0b3AoKTsgLy9AdHMtaWdub3JlCgogICAgICB0aGlzLl90aW1lcklkID0gc2V0VGltZW91dCh0aGlzLmhhbmRsZVRpbWVyRXZlbnQsIGludGVydmFsSW5NUyk7CiAgICB9IC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICB9LCB7CiAgICBrZXk6ICJzdG9wIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkgewogICAgICBpZiAodGhpcy5fdGltZXJJZCA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXJJZCk7CiAgICAgIHRoaXMuX3RpbWVySWQgPSBudWxsOwogICAgfQogIH1dLCBbewogICAga2V5OiAid2FpdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3dhaXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoaW50ZXJ2YWxJbk1TKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBpbnRlcnZhbEluTVMpOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gd2FpdChfeCkgewogICAgICAgIHJldHVybiBfd2FpdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gd2FpdDsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIFRpbWVyOwp9KCk7"},{"version":3,"sources":["C:\\Users\\Molin\\Companion\\shared\\libs\\timer.ts"],"names":[],"mappings":";;;;;AAIA;AACA,WAAa,KAAb;AAaE;AACA,iBAAY,QAAZ,EAAqC,EAArC,EAAgD;AAAA;;AAAA;;AAbhD;AACQ,SAAA,QAAA,GAAwB,IAAxB,CAYwC,CAuBhD;;AACQ,SAAA,gBAAA,GAAmB,YAAK;AAC9B,MAAA,KAAI,CAAC,QAAL,GAAgB,IAAhB;;AACA,MAAA,KAAI,CAAC,SAAL,CAAe,OAAf,CAAuB,KAAI,CAAC,GAA5B;AACD,KAHO;;AAvBN,SAAK,SAAL,GAAiB,QAAjB;AACA,SAAK,GAAL,GAAW,EAAX;AACD,GAjBH,CAME;;;AANF;AAAA;AAmBE;AAnBF,0BAoBe,YApBf,EAoBmC;AAC/B,WAAK,IAAL,GAD+B,CAG/B;;AACA,WAAK,QAAL,GAAwB,UAAU,CAAC,KAAK,gBAAN,EAAwB,YAAxB,CAAlC;AACD,KAzBH,CA2BE;;AA3BF;AAAA;AAAA,2BA4Ba;AACT,UAAI,KAAK,QAAL,IAAiB,IAArB,EAA2B;AACzB;AACD;;AAED,MAAA,YAAY,CAAC,KAAK,QAAN,CAAZ;AACA,WAAK,QAAL,GAAgB,IAAhB;AACD;AAnCH;AAAA;AAAA;AAAA,2FAO2B,YAP3B;AAAA;AAAA;AAAA;AAAA;AAAA,iDAQW,IAAI,OAAJ,CAAkB,UAAA,OAAO,EAAG;AACjC,kBAAA,UAAU,CAAC,OAAD,EAAU,YAAV,CAAV;AACD,iBAFM,CARX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA","sourcesContent":["export interface TimerDelegate {\r\n  onTimer(id?: string): void;\r\n}\r\n\r\n//------------------------------------------------------------------------------\r\nexport class Timer {\r\n  //----------------------------------------------------------------------------\r\n  private _timerId: number|null = null;\r\n  private _id: string|undefined;\r\n  private _delegate: TimerDelegate;\r\n\r\n  //----------------------------------------------------------------------------\r\n  public static async wait(intervalInMS: number): Promise<void> {\r\n    return new Promise<void>(resolve => {\r\n      setTimeout(resolve, intervalInMS);\r\n    })\r\n  }\r\n\r\n  //----------------------------------------------------------------------------\r\n  constructor(delegate: TimerDelegate, id?: string) {\r\n    this._delegate = delegate;\r\n    this._id = id;\r\n  }\r\n\r\n  //----------------------------------------------------------------------------\r\n  public start(intervalInMS: number): void {\r\n    this.stop();\r\n\r\n    //@ts-ignore\r\n    this._timerId = <number>setTimeout(this.handleTimerEvent, intervalInMS);\r\n  }\r\n\r\n  //----------------------------------------------------------------------------\r\n  public stop(): void {\r\n    if (this._timerId == null) {\r\n      return;\r\n    }\r\n\r\n    clearTimeout(this._timerId);\r\n    this._timerId = null;\r\n  }\r\n\r\n  //----------------------------------------------------------------------------\r\n  private handleTimerEvent = () => {\r\n    this._timerId = null;\r\n    this._delegate.onTimer(this._id);\r\n  }\r\n}\r\n"],"sourceRoot":""}]}