{"remainingRequest":"C:\\Users\\Luca\\Companion\\CoreApp\\in-game\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Luca\\Companion\\CoreApp\\in-game\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Luca\\Companion\\CoreApp\\in-game\\node_modules\\ts-loader\\index.js??ref--13-3!C:\\Users\\Luca\\Companion\\CoreApp\\shared\\libs\\timer.ts","dependencies":[{"path":"C:\\Users\\Luca\\Companion\\CoreApp\\shared\\libs\\timer.ts","mtime":1608681494462},{"path":"C:\\Users\\Luca\\Companion\\CoreApp\\in-game\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1608685446369},{"path":"C:\\Users\\Luca\\Companion\\CoreApp\\in-game\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1608685447511},{"path":"C:\\Users\\Luca\\Companion\\CoreApp\\in-game\\node_modules\\babel-loader\\lib\\index.js","mtime":1608685524005},{"path":"C:\\Users\\Luca\\Companion\\CoreApp\\in-game\\node_modules\\ts-loader\\index.js","mtime":1608685447723}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxVc2Vyc1xcTHVjYVxcQ29tcGFuaW9uXFxDb3JlQXBwXFxpbi1nYW1lXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOlxcVXNlcnNcXEx1Y2FcXENvbXBhbmlvblxcQ29yZUFwcFxcaW4tZ2FtZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6XFxVc2Vyc1xcTHVjYVxcQ29tcGFuaW9uXFxDb3JlQXBwXFxpbi1nYW1lXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7Ci8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmV4cG9ydCB2YXIgVGltZXIgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICBmdW5jdGlvbiBUaW1lcihkZWxlZ2F0ZSwgaWQpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRpbWVyKTsKCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHRoaXMuX3RpbWVySWQgPSBudWxsOyAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICB0aGlzLmhhbmRsZVRpbWVyRXZlbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLl90aW1lcklkID0gbnVsbDsKCiAgICAgIF90aGlzLl9kZWxlZ2F0ZS5vblRpbWVyKF90aGlzLl9pZCk7CiAgICB9OwoKICAgIHRoaXMuX2RlbGVnYXRlID0gZGVsZWdhdGU7CiAgICB0aGlzLl9pZCA9IGlkOwogIH0gLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKICBfY3JlYXRlQ2xhc3MoVGltZXIsIFt7CiAgICBrZXk6ICJzdGFydCIsCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydChpbnRlcnZhbEluTVMpIHsKICAgICAgdGhpcy5zdG9wKCk7IC8vQHRzLWlnbm9yZQoKICAgICAgdGhpcy5fdGltZXJJZCA9IHNldFRpbWVvdXQodGhpcy5oYW5kbGVUaW1lckV2ZW50LCBpbnRlcnZhbEluTVMpOwogICAgfSAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgfSwgewogICAga2V5OiAic3RvcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3RvcCgpIHsKICAgICAgaWYgKHRoaXMuX3RpbWVySWQgPT0gbnVsbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVySWQpOwogICAgICB0aGlzLl90aW1lcklkID0gbnVsbDsKICAgIH0KICB9XSwgW3sKICAgIGtleTogIndhaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF93YWl0ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShpbnRlcnZhbEluTVMpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIGludGVydmFsSW5NUyk7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB3YWl0KF94KSB7CiAgICAgICAgcmV0dXJuIF93YWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB3YWl0OwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gVGltZXI7Cn0oKTs="},{"version":3,"sources":["C:\\Users\\Luca\\Companion\\CoreApp\\shared\\libs\\timer.ts"],"names":[],"mappings":";;;;;AAIA;AACA,WAAa,KAAb;AAAA;AAAA;AAaE;AACA,iBAAY,QAAZ,EAAqC,EAArC,EAAgD;AAAA;;AAAA;;AAbhD;AACQ,SAAA,QAAA,GAAwB,IAAxB,CAYwC,CAuBhD;;AACQ,SAAA,gBAAA,GAAmB,YAAK;AAC9B,MAAA,KAAI,CAAC,QAAL,GAAgB,IAAhB;;AACA,MAAA,KAAI,CAAC,SAAL,CAAe,OAAf,CAAuB,KAAI,CAAC,GAA5B;AACD,KAHO;;AAvBN,SAAK,SAAL,GAAiB,QAAjB;AACA,SAAK,GAAL,GAAW,EAAX;AACD,GAjBH,CAME;;;AANF;AAAA;AAmBE;AAnBF,0BAoBe,YApBf,EAoBmC;AAC/B,WAAK,IAAL,GAD+B,CAG/B;;AACA,WAAK,QAAL,GAAwB,UAAU,CAAC,KAAK,gBAAN,EAAwB,YAAxB,CAAlC;AACD,KAzBH,CA2BE;;AA3BF;AAAA;AAAA,2BA4Ba;AACT,UAAI,KAAK,QAAL,IAAiB,IAArB,EAA2B;AACzB;AACD;;AAED,MAAA,YAAY,CAAC,KAAK,QAAN,CAAZ;AACA,WAAK,QAAL,GAAgB,IAAhB;AACD;AAnCH;AAAA;AAAA;AAAA;AAAA;AAAA,+CAO2B,YAP3B;AAAA;AAAA;AAAA;AAAA;AAAA,iDAQW,IAAI,OAAJ,CAAkB,UAAA,OAAO,EAAG;AACjC,kBAAA,UAAU,CAAC,OAAD,EAAU,YAAV,CAAV;AACD,iBAFM,CARX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA","sourcesContent":["export interface TimerDelegate {\r\n  onTimer(id?: string): void;\r\n}\r\n\r\n//------------------------------------------------------------------------------\r\nexport class Timer {\r\n  //----------------------------------------------------------------------------\r\n  private _timerId: number|null = null;\r\n  private _id: string|undefined;\r\n  private _delegate: TimerDelegate;\r\n\r\n  //----------------------------------------------------------------------------\r\n  public static async wait(intervalInMS: number): Promise<void> {\r\n    return new Promise<void>(resolve => {\r\n      setTimeout(resolve, intervalInMS);\r\n    })\r\n  }\r\n\r\n  //----------------------------------------------------------------------------\r\n  constructor(delegate: TimerDelegate, id?: string) {\r\n    this._delegate = delegate;\r\n    this._id = id;\r\n  }\r\n\r\n  //----------------------------------------------------------------------------\r\n  public start(intervalInMS: number): void {\r\n    this.stop();\r\n\r\n    //@ts-ignore\r\n    this._timerId = <number>setTimeout(this.handleTimerEvent, intervalInMS);\r\n  }\r\n\r\n  //----------------------------------------------------------------------------\r\n  public stop(): void {\r\n    if (this._timerId == null) {\r\n      return;\r\n    }\r\n\r\n    clearTimeout(this._timerId);\r\n    this._timerId = null;\r\n  }\r\n\r\n  //----------------------------------------------------------------------------\r\n  private handleTimerEvent = () => {\r\n    this._timerId = null;\r\n    this._delegate.onTimer(this._id);\r\n  }\r\n}\r\n"],"sourceRoot":""}]}